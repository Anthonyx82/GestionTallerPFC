%% Generated by Sphinx.
\def\sphinxdocclass{report}
\documentclass[letterpaper,10pt,spanish]{sphinxmanual}
\ifdefined\pdfpxdimen
   \let\sphinxpxdimen\pdfpxdimen\else\newdimen\sphinxpxdimen
\fi \sphinxpxdimen=.75bp\relax
\ifdefined\pdfimageresolution
    \pdfimageresolution= \numexpr \dimexpr1in\relax/\sphinxpxdimen\relax
\fi
%% let collapsible pdf bookmarks panel have high depth per default
\PassOptionsToPackage{bookmarksdepth=5}{hyperref}

\PassOptionsToPackage{booktabs}{sphinx}
\PassOptionsToPackage{colorrows}{sphinx}

\PassOptionsToPackage{warn}{textcomp}
\usepackage[utf8]{inputenc}
\ifdefined\DeclareUnicodeCharacter
% support both utf8 and utf8x syntaxes
  \ifdefined\DeclareUnicodeCharacterAsOptional
    \def\sphinxDUC#1{\DeclareUnicodeCharacter{"#1}}
  \else
    \let\sphinxDUC\DeclareUnicodeCharacter
  \fi
  \sphinxDUC{00A0}{\nobreakspace}
  \sphinxDUC{2500}{\sphinxunichar{2500}}
  \sphinxDUC{2502}{\sphinxunichar{2502}}
  \sphinxDUC{2514}{\sphinxunichar{2514}}
  \sphinxDUC{251C}{\sphinxunichar{251C}}
  \sphinxDUC{2572}{\textbackslash}
\fi
\usepackage{cmap}
\usepackage[T1]{fontenc}
\usepackage{amsmath,amssymb,amstext}
\usepackage{babel}



\usepackage{tgtermes}
\usepackage{tgheros}
\renewcommand{\ttdefault}{txtt}



\usepackage[Sonny]{fncychap}
\ChNameVar{\Large\normalfont\sffamily}
\ChTitleVar{\Large\normalfont\sffamily}
\usepackage{sphinx}

\fvset{fontsize=auto}
\usepackage{geometry}


% Include hyperref last.
\usepackage{hyperref}
% Fix anchor placement for figures with captions.
\usepackage{hypcap}% it must be loaded after hyperref.
% Set up styles of URL: it should be placed after hyperref.
\urlstyle{same}

\addto\captionsspanish{\renewcommand{\contentsname}{Contenido:}}

\usepackage{sphinxmessages}
\setcounter{tocdepth}{1}


\usepackage[utf8]{inputenc}
\usepackage{underscore}
\renewcommand{\sphinxbfcode}[1]{\textbf{\sphinxcode{#1}}}
\renewcommand{\sphinxupquote}[1]{\texttt{#1}}

% Cargar tabulary normalmente
\usepackage{tabulary}

% Colores naranja para enlaces y títulos
\usepackage{xcolor}
\definecolor{sphinxorange}{RGB}{255,140,0}
\definecolor{sphinxorangeLink}{RGB}{255,165,79}

\usepackage{hyperref}
\hypersetup{
    colorlinks=true,
    linkcolor=sphinxorange,
    urlcolor=sphinxorangeLink,
    citecolor=sphinxorange,
    filecolor=sphinxorange,
}

\usepackage{sectsty}
\allsectionsfont{\color{sphinxorange}}

% Estilo para encabezados de tablas (normal + negrita)
\renewcommand{\sphinxstyletheadfamily}{\normalfont\bfseries}


\title{Taller API}
\date{06 de junio de 2025}
\release{2.0.0}
\author{Antonio Martin Sosa}
\newcommand{\sphinxlogo}{\vbox{}}
\renewcommand{\releasename}{Versión}
\makeindex
\begin{document}

\ifdefined\shorthandoff
  \ifnum\catcode`\=\string=\active\shorthandoff{=}\fi
  \ifnum\catcode`\"=\active\shorthandoff{"}\fi
\fi

\pagestyle{empty}
\sphinxmaketitle
\pagestyle{plain}
\sphinxtableofcontents
\pagestyle{normal}
\phantomsection\label{\detokenize{index::doc}}


\sphinxAtStartPar
Bienvenido al sistema de documentación de la API de gestión de vehículos e informes de diagnóstico. Aquí encontrarás toda la información necesaria para entender cómo consumir nuestros endpoints, los modelos de datos y la configuración del proyecto.

\sphinxstepscope


\chapter{Introducción}
\label{\detokenize{introduccion:introduccion}}\label{\detokenize{introduccion::doc}}
\sphinxAtStartPar
Bienvenido a la documentación técnica de la \sphinxstylestrong{API de gestión de vehículos e informes de diagnóstico}. Esta API permite:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Registrar usuarios y autenticarlos mediante JWT.

\item {} 
\sphinxAtStartPar
Añadir vehículos a la cuenta de usuario, junto con sus datos OBD\sphinxhyphen{}II en tiempo real.

\item {} 
\sphinxAtStartPar
Almacenar y consultar errores OBD\sphinxhyphen{}II (códigos DTC) asociados a cada vehículo.

\item {} 
\sphinxAtStartPar
Generar informes de diagnóstico y enviarlos por correo a los clientes.

\item {} 
\sphinxAtStartPar
Compartir informes mediante enlaces públicos protegidos con un token UUID.

\end{itemize}


\section{Público Objetivo}
\label{\detokenize{introduccion:publico-objetivo}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Desarrolladores que estén integrando una solución de telemetría OBD\sphinxhyphen{}II.

\item {} 
\sphinxAtStartPar
Equipos de soporte técnico que necesiten generar y enviar informes de fallos a clientes.

\item {} 
\sphinxAtStartPar
Administradores de flotas que quieran mantener un registro de diagnósticos remotos.

\end{itemize}


\section{Tecnologías Principales}
\label{\detokenize{introduccion:tecnologias-principales}}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{FastAPI}:
\sphinxhyphen{} Framework web para construir APIs RESTful de alto rendimiento.
\sphinxhyphen{} Documentación automática en Swagger (\sphinxcode{\sphinxupquote{/docs}}) y ReDoc (\sphinxcode{\sphinxupquote{/redoc}}).

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{SQLAlchemy}:
\sphinxhyphen{} ORM para gestionar la base de datos relacional MySQL.
\sphinxhyphen{} Modelado de entidades como \sphinxcode{\sphinxupquote{Usuario}}, \sphinxcode{\sphinxupquote{Vehiculo}}, \sphinxcode{\sphinxupquote{ErrorVehiculo}} e \sphinxcode{\sphinxupquote{InformeCompartido}}.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Pydantic}:
\sphinxhyphen{} Validación y serialización de datos en entradas y respuestas.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{JWT (JSON Web Tokens)}:
\sphinxhyphen{} Autenticación sin estado (stateless).
\sphinxhyphen{} Expiración configurable.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{FastAPI\sphinxhyphen{}Mail}:
\sphinxhyphen{} Envío de correos electrónicos con plantillas HTML para los informes.
\sphinxhyphen{} Compatible con TLS/SSL y validación de certificados.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{MySQL}:
\sphinxhyphen{} Sistema de gestión de base de datos relacional.
\sphinxhyphen{} Se puede ajustar el motor/host/credenciales a través de \sphinxcode{\sphinxupquote{DATABASE\_URL}}.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Sphinx}:
\sphinxhyphen{} Generación de la documentación estática en formato HTML/Markdown/PDF.
\sphinxhyphen{} Uso de directivas como \sphinxcode{\sphinxupquote{.. automodule::}} para extraer docstrings de \sphinxcode{\sphinxupquote{main.py}}.

\end{itemize}


\section{Estructura de la Documentación}
\label{\detokenize{introduccion:estructura-de-la-documentacion}}
\sphinxAtStartPar
Esta documentación se divide en:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Introducción}: visión global, tecnologías y esquema de carpetas.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Endpoints}: descripción detallada de cada ruta, sus parámetros y ejemplos.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Modelos de Datos}: descripción de cada clase ORM y modelo Pydantic.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Configuración}: variables de entorno necesarias y explicación de la configuración del proyecto.

\end{enumerate}


\section{Requisitos Previos}
\label{\detokenize{introduccion:requisitos-previos}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Python 3.9+

\item {} 
\sphinxAtStartPar
MySQL (o servidor compatible)

\item {} 
\sphinxAtStartPar
Dependencias del proyecto definidas en \sphinxcode{\sphinxupquote{requirements.txt}} (FastAPI, SQLAlchemy, Pydantic, FastAPI\sphinxhyphen{}Mail, python\sphinxhyphen{}dotenv, etc.)

\end{itemize}

\sphinxAtStartPar
Para ejecutar localmente:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Clona el repositorio.

\item {} 
\sphinxAtStartPar
Crea un entorno virtual:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
python3\PYG{+w}{ }\PYGZhy{}m\PYG{+w}{ }venv\PYG{+w}{ }venv
\PYG{n+nb}{source}\PYG{+w}{ }venv/bin/activate
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Instala las dependencias del proyecto:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
pip\PYG{+w}{ }install\PYG{+w}{ }\PYGZhy{}r\PYG{+w}{ }requirements.txt
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Configura las variables de entorno necesarias creando un archivo \sphinxcode{\sphinxupquote{.env}} en la raíz del proyecto.
Puedes usar como base un archivo \sphinxcode{\sphinxupquote{.env.example}}.

\item {} 
\sphinxAtStartPar
Ejecuta la aplicación usando Uvicorn:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
uvicorn\PYG{+w}{ }main:app\PYG{+w}{ }\PYGZhy{}\PYGZhy{}reload
\end{sphinxVerbatim}

\end{enumerate}


\section{Buenas Prácticas}
\label{\detokenize{introduccion:buenas-practicas}}\begin{itemize}
\item {} 
\sphinxAtStartPar
Mantén las variables de entorno fuera del control de versiones (\sphinxcode{\sphinxupquote{.gitignore}}).

\item {} 
\sphinxAtStartPar
Usa HTTPS y certificados válidos en producción.

\item {} 
\sphinxAtStartPar
Cambia la clave \sphinxcode{\sphinxupquote{SECRET\_KEY}} y el \sphinxcode{\sphinxupquote{ALGORITHM}} antes de desplegar.

\item {} 
\sphinxAtStartPar
Implementa control de errores en el frontend para manejar respuestas \sphinxcode{\sphinxupquote{401}}, \sphinxcode{\sphinxupquote{403}}, \sphinxcode{\sphinxupquote{422}}, etc.

\item {} 
\sphinxAtStartPar
Revisa los logs para rastrear errores en endpoints como \sphinxcode{\sphinxupquote{/crear\sphinxhyphen{}informe/}}.

\end{itemize}


\section{Licencia y Contribución}
\label{\detokenize{introduccion:licencia-y-contribucion}}
\sphinxAtStartPar
Este proyecto se entrega con fines educativos y está licenciado bajo los términos definidos en el archivo \sphinxcode{\sphinxupquote{LICENSE}}.

\sphinxAtStartPar
Si deseas contribuir:
\begin{itemize}
\item {} 
\sphinxAtStartPar
Realiza un fork del repositorio.

\item {} 
\sphinxAtStartPar
Crea una rama para tu mejora o corrección:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
git\PYG{+w}{ }checkout\PYG{+w}{ }\PYGZhy{}b\PYG{+w}{ }feature/nombre
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Haz tus commits siguiendo buenas prácticas de formato y mensajes.

\item {} 
\sphinxAtStartPar
Envía un Pull Request para revisión.

\end{itemize}


\section{Contacto}
\label{\detokenize{introduccion:contacto}}
\sphinxAtStartPar
Para dudas, errores o sugerencias, puedes abrir un issue en GitHub o contactar directamente con el equipo de desarrollo a traves del repositorio de GitHub

\sphinxstepscope


\chapter{Endpoints de la API}
\label{\detokenize{endpoints:endpoints-de-la-api}}\label{\detokenize{endpoints::doc}}
\sphinxAtStartPar
En este documento se describen todos los endpoints disponibles en la API, organizados por funcionalidad. Para cada ruta se indica método HTTP, URL, esquema de datos de entrada/salida, validaciones y ejemplos de uso.


\section{Autenticación y Usuarios}
\label{\detokenize{endpoints:autenticacion-y-usuarios}}

\subsection{Registro de Usuario}
\label{\detokenize{endpoints:registro-de-usuario}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{endpoints:post--register}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{POST~}}\sphinxbfcode{\sphinxupquote{/register}}}
\pysigstopsignatures
\sphinxAtStartPar
Registra un nuevo usuario en la base de datos.

\sphinxAtStartPar
\sphinxstylestrong{Request Body} (\sphinxcode{\sphinxupquote{UsuarioRegistro}}):
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{username}} (string, obligatorio, mínimo 3 caracteres)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{password}} (string, obligatorio, mínimo 6 caracteres)

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Ejemplo}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nf}{POST} \PYG{n+nn}{/register} \PYG{k+kr}{HTTP}\PYG{o}{/}\PYG{l+m}{1.1}
\PYG{n+na}{Host}\PYG{o}{:} \PYG{l}{api.ejemplo.com}
\PYG{n+na}{Content\PYGZhy{}Type}\PYG{o}{:} \PYG{l}{application/json}

\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}username\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}juanperez\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}password\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}secreto123\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Responses}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{200 OK}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}mensaje\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Usuario registrado correctamente\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{400 Bad Request}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Cuando \sphinxcode{\sphinxupquote{username}} o \sphinxcode{\sphinxupquote{password}} no cumplen longitud mínima.

\item {} 
\sphinxAtStartPar
Si el \sphinxcode{\sphinxupquote{username}} ya existe.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}El usuario ya existe\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{500 Internal Server Error}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Error inesperado al guardar en la base de datos.

\end{itemize}

\end{itemize}

\end{fulllineitems}



\subsection{Login / Obtención de Token}
\label{\detokenize{endpoints:login-obtencion-de-token}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{endpoints:post--login}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{POST~}}\sphinxbfcode{\sphinxupquote{/login}}}
\pysigstopsignatures
\sphinxAtStartPar
Autentica al usuario y devuelve un token JWT.

\sphinxAtStartPar
\sphinxstylestrong{Request Body} (\sphinxcode{\sphinxupquote{UsuarioLogin}}):
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{username}} (string, obligatorio)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{password}} (string, obligatorio)

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Ejemplo}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nf}{POST} \PYG{n+nn}{/login} \PYG{k+kr}{HTTP}\PYG{o}{/}\PYG{l+m}{1.1}
\PYG{n+na}{Host}\PYG{o}{:} \PYG{l}{api.ejemplo.com}
\PYG{n+na}{Content\PYGZhy{}Type}\PYG{o}{:} \PYG{l}{application/json}

\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}username\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}juanperez\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}password\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}secreto123\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Responses}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{200 OK}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}access\PYGZus{}token\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}token\PYGZus{}type\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}bearer\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{400 Bad Request}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Si \sphinxcode{\sphinxupquote{username}} o \sphinxcode{\sphinxupquote{password}} no cumplen requisitos (longitud).

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Las credenciales no cumplen los requisitos mínimos\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{401 Unauthorized}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Usuario no registrado o contraseña incorrecta.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Credenciales inválidas\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{500 Internal Server Error}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Error al generar el token.

\end{itemize}

\end{itemize}

\end{fulllineitems}



\section{Gestión de Vehículos}
\label{\detokenize{endpoints:gestion-de-vehiculos}}
\begin{sphinxadmonition}{note}{Nota:}
\sphinxAtStartPar
Todos los endpoints de esta sección requieren que el header \sphinxcode{\sphinxupquote{Authorization: Bearer \textless{}token\textgreater{}}} contenga un JWT válido.
\end{sphinxadmonition}


\subsection{Guardar Vehículo}
\label{\detokenize{endpoints:guardar-vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{endpoints:post--guardar-vehiculo-}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{POST~}}\sphinxbfcode{\sphinxupquote{/guardar\sphinxhyphen{}vehiculo/}}}
\pysigstopsignatures
\sphinxAtStartPar
Crea un nuevo vehículo y lo asocia al usuario autenticado.

\sphinxAtStartPar
\sphinxstylestrong{Request Body} (\sphinxcode{\sphinxupquote{VehiculoRegistro}}):
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{marca}} (string, obligatorio)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{modelo}} (string, obligatorio)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{year}} (integer, obligatorio, p. ej., 2023)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{rpm}} (integer, obligatorio)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{velocidad}} (integer, obligatorio)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vin}} (string, obligatorio, longitud = 17)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{revision}} (dict JSON, obligatorio)
\sphinxhyphen{} \sphinxcode{\sphinxupquote{tipo}} (string, obligatorio)
\sphinxhyphen{} \sphinxcode{\sphinxupquote{fecha}} (string, formato ISO YYYY\sphinxhyphen{}MM\sphinxhyphen{}DD, obligatorio)
\sphinxhyphen{} \sphinxcode{\sphinxupquote{observaciones}} (string, opcional)

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Ejemplo}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nf}{POST} \PYG{n+nn}{/guardar\PYGZhy{}vehiculo/} \PYG{k+kr}{HTTP}\PYG{o}{/}\PYG{l+m}{1.1}
\PYG{n+na}{Host}\PYG{o}{:} \PYG{l}{api.ejemplo.com}
\PYG{n+na}{Authorization}\PYG{o}{:} \PYG{l}{Bearer eyJhbGciOi...}
\PYG{n+na}{Content\PYGZhy{}Type}\PYG{o}{:} \PYG{l}{application/json}

\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}marca\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Ford\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}modelo\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Focus\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}year\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2020}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}rpm\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{1200}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}velocidad\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{60}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}vin\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}1HGCM82633A004352\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}revision\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{\PYGZob{}}
\PYG{+w}{    }\PYG{n+nt}{\PYGZdq{}tipo\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}General\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{    }\PYG{n+nt}{\PYGZdq{}fecha\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2025\PYGZhy{}06\PYGZhy{}05\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{    }\PYG{n+nt}{\PYGZdq{}observaciones\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Cambio aceite\PYGZdq{}}
\PYG{+w}{  }\PYG{p}{\PYGZcb{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Responses}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{200 OK}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}mensaje\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Vehículo guardado correctamente\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}id\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{10}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{400 Bad Request}
\begin{itemize}
\item {} 
\sphinxAtStartPar
VIN inválido (no 17 caracteres) o campos faltantes.

\item {} 
\sphinxAtStartPar
VIN duplicado.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}VIN inválido o ya registrado\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{401 Unauthorized}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Token ausente, inválido o expirado.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}No autenticado\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{500 Internal Server Error}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Error interno al persistir datos.

\end{itemize}

\end{itemize}

\end{fulllineitems}



\subsection{Listar Vehículos del Usuario}
\label{\detokenize{endpoints:listar-vehiculos-del-usuario}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{endpoints:get--mis-vehiculos-}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{GET~}}\sphinxbfcode{\sphinxupquote{/mis\sphinxhyphen{}vehiculos/}}}
\pysigstopsignatures
\sphinxAtStartPar
Recupera todos los vehículos asociados al usuario autenticado.

\sphinxAtStartPar
\sphinxstylestrong{Headers}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Authorization: Bearer \textless{}token\textgreater{}}} (string, obligatorio)

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Ejemplo}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nf}{GET} \PYG{n+nn}{/mis\PYGZhy{}vehiculos/} \PYG{k+kr}{HTTP}\PYG{o}{/}\PYG{l+m}{1.1}
\PYG{n+na}{Host}\PYG{o}{:} \PYG{l}{api.ejemplo.com}
\PYG{n+na}{Authorization}\PYG{o}{:} \PYG{l}{Bearer eyJhbGciOi...}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Responses}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{200 OK}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Si existen vehículos:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}vehiculos\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}id\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{1}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}marca\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Toyota\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}modelo\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Corolla\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}year\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2018}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}rpm\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{1500}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}velocidad\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{80}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}vin\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}JTDBL40E799017833\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}revision\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{\PYGZob{}}\PYG{n+nt}{\PYGZdq{}tipo\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Anual\PYGZdq{}}\PYG{p}{,}\PYG{+w}{ }\PYG{n+nt}{\PYGZdq{}fecha\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2025\PYGZhy{}01\PYGZhy{}10\PYGZdq{}}\PYG{p}{\PYGZcb{},}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}usuario\PYGZus{}id\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{5}
\PYG{+w}{    }\PYG{p}{\PYGZcb{},}
\PYG{+w}{    }\PYG{p}{\PYGZob{}}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}id\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}marca\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Honda\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}modelo\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Civic\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}year\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2021}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}rpm\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{1300}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}velocidad\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{70}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}vin\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2HGFC2F59MH123456\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}revision\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{\PYGZob{}}\PYG{n+nt}{\PYGZdq{}tipo\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Cambio llantas\PYGZdq{}}\PYG{p}{,}\PYG{+w}{ }\PYG{n+nt}{\PYGZdq{}fecha\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2025\PYGZhy{}03\PYGZhy{}20\PYGZdq{}}\PYG{p}{\PYGZcb{},}
\PYG{+w}{      }\PYG{n+nt}{\PYGZdq{}usuario\PYGZus{}id\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{5}
\PYG{+w}{    }\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Si no hay vehículos:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}mensaje\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}No hay vehículos registrados para este usuario.\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}vehiculos\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{401 Unauthorized}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Token inválido o expirado.

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{500 Internal Server Error}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Error al recuperar datos.

\end{itemize}

\end{itemize}

\end{fulllineitems}



\subsection{Obtener Vehículo Específico}
\label{\detokenize{endpoints:obtener-vehiculo-especifico}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{endpoints:get--mis-vehiculos-vehiculo_id}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{GET~}}\sphinxbfcode{\sphinxupquote{/mis\sphinxhyphen{}vehiculos/\{vehiculo\_id\}}}}
\pysigstopsignatures
\sphinxAtStartPar
Recupera la información de un único vehículo (\sphinxcode{\sphinxupquote{vehiculo\_id}}) si pertenece al usuario.

\sphinxAtStartPar
\sphinxstylestrong{URL Parameters}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vehiculo\_id}} (integer, obligatorio)

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Ejemplo}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nf}{GET} \PYG{n+nn}{/mis\PYGZhy{}vehiculos/2} \PYG{k+kr}{HTTP}\PYG{o}{/}\PYG{l+m}{1.1}
\PYG{n+na}{Host}\PYG{o}{:} \PYG{l}{api.ejemplo.com}
\PYG{n+na}{Authorization}\PYG{o}{:} \PYG{l}{Bearer eyJhbGciOi...}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Responses}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{200 OK}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}id\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}marca\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Honda\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}modelo\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Civic\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}year\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2021}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}rpm\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{1300}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}velocidad\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{70}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}vin\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2HGFC2F59MH123456\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}revision\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{\PYGZob{}}\PYG{n+nt}{\PYGZdq{}tipo\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Cambio llantas\PYGZdq{}}\PYG{p}{,}\PYG{+w}{ }\PYG{n+nt}{\PYGZdq{}fecha\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2025\PYGZhy{}03\PYGZhy{}20\PYGZdq{}}\PYG{p}{\PYGZcb{},}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}usuario\PYGZus{}id\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{5}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{404 Not Found}
\begin{itemize}
\item {} 
\sphinxAtStartPar
El vehículo no existe o no pertenece al usuario.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Vehículo no encontrado\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{401 Unauthorized}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Token inválido o expirado.

\end{itemize}

\end{itemize}

\end{fulllineitems}



\subsection{Editar Vehículo}
\label{\detokenize{endpoints:editar-vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{endpoints:put--editar-vehiculo-vehiculo_id}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{PUT~}}\sphinxbfcode{\sphinxupquote{/editar\sphinxhyphen{}vehiculo/\{vehiculo\_id\}}}}
\pysigstopsignatures
\sphinxAtStartPar
Actualiza los datos de un vehículo existente.

\sphinxAtStartPar
\sphinxstylestrong{URL Parameters}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vehiculo\_id}} (integer, obligatorio)

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Request Body} (\sphinxcode{\sphinxupquote{VehiculoEdicion}}):
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{marca}} (string, obligatorio)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{modelo}} (string, obligatorio)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{year}} (integer, obligatorio)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{rpm}} (integer, obligatorio)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{velocidad}} (integer, obligatorio)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vin}} (string, obligatorio, longitud = 17)

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Ejemplo}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nf}{PUT} \PYG{n+nn}{/editar\PYGZhy{}vehiculo/2} \PYG{k+kr}{HTTP}\PYG{o}{/}\PYG{l+m}{1.1}
\PYG{n+na}{Host}\PYG{o}{:} \PYG{l}{api.ejemplo.com}
\PYG{n+na}{Authorization}\PYG{o}{:} \PYG{l}{Bearer eyJhbGciOi...}
\PYG{n+na}{Content\PYGZhy{}Type}\PYG{o}{:} \PYG{l}{application/json}

\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}marca\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Honda\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}modelo\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Civic LX\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}year\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2022}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}rpm\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{1400}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}velocidad\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{75}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}vin\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2HGFC2F59MH123456\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Responses}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{200 OK}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}mensaje\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Vehículo actualizado correctamente\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{400 Bad Request}
\begin{itemize}
\item {} 
\sphinxAtStartPar
VIN inválido o ya registrado en otro vehículo.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}VIN duplicado\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{404 Not Found}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Vehículo no existe o no pertenece al usuario.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Vehículo no encontrado\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{401 Unauthorized}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Token inválido o expirado.

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{500 Internal Server Error}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Error interno al actualizar.

\end{itemize}

\end{itemize}

\end{fulllineitems}



\subsection{Eliminar Vehículo}
\label{\detokenize{endpoints:eliminar-vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{endpoints:delete--eliminar-vehiculo-vehiculo_id}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{DELETE~}}\sphinxbfcode{\sphinxupquote{/eliminar\sphinxhyphen{}vehiculo/\{vehiculo\_id\}}}}
\pysigstopsignatures
\sphinxAtStartPar
Elimina un vehículo y todos sus errores OBD\sphinxhyphen{}II asociados (cascade).

\sphinxAtStartPar
\sphinxstylestrong{URL Parameters}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vehiculo\_id}} (integer, obligatorio)

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Ejemplo}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nf}{DELETE} \PYG{n+nn}{/eliminar\PYGZhy{}vehiculo/2} \PYG{k+kr}{HTTP}\PYG{o}{/}\PYG{l+m}{1.1}
\PYG{n+na}{Host}\PYG{o}{:} \PYG{l}{api.ejemplo.com}
\PYG{n+na}{Authorization}\PYG{o}{:} \PYG{l}{Bearer eyJhbGciOi...}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Responses}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{200 OK}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}mensaje\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Vehículo eliminado correctamente\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}errores\PYGZus{}eliminados\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{4}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{errores\_eliminados}}: cantidad de registros de errores borrados.

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{404 Not Found}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Vehículo no existe o no pertenece al usuario.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Vehículo no encontrado\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{401 Unauthorized}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Token inválido o expirado.

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{500 Internal Server Error}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Error interno al eliminar.

\end{itemize}

\end{itemize}

\end{fulllineitems}



\section{Gestión de Errores OBD\sphinxhyphen{}II}
\label{\detokenize{endpoints:gestion-de-errores-obd-ii}}
\begin{sphinxadmonition}{note}{Nota:}
\sphinxAtStartPar
Estos endpoints también requieren token válido en \sphinxcode{\sphinxupquote{Authorization}}.
\end{sphinxadmonition}


\subsection{Guardar Errores de Vehículo}
\label{\detokenize{endpoints:guardar-errores-de-vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{endpoints:post--guardar-errores-}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{POST~}}\sphinxbfcode{\sphinxupquote{/guardar\sphinxhyphen{}errores/}}}
\pysigstopsignatures
\sphinxAtStartPar
Registra múltiples códigos DTC para un vehículo del usuario.

\sphinxAtStartPar
\sphinxstylestrong{Request Body} (\sphinxcode{\sphinxupquote{ErrorVehiculoRegistro}}):
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vehiculo\_id}} (integer, obligatorio)

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{codigo\_dtc}} (array{[}string{]}, obligatorio)
\sphinxhyphen{} Lista de códigos OBD\sphinxhyphen{}II (p. ej.: \sphinxcode{\sphinxupquote{{[}"P0301", "P0420", "P0133"{]}}})

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Validaciones}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vehiculo\_id}} debe ser entero positivo y corresponder a un vehículo del usuario.

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{codigo\_dtc}} no puede estar vacío ni contener duplicados o valores en blanco.

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Ejemplo}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nf}{POST} \PYG{n+nn}{/guardar\PYGZhy{}errores/} \PYG{k+kr}{HTTP}\PYG{o}{/}\PYG{l+m}{1.1}
\PYG{n+na}{Host}\PYG{o}{:} \PYG{l}{api.ejemplo.com}
\PYG{n+na}{Authorization}\PYG{o}{:} \PYG{l}{Bearer eyJhbGciOi...}
\PYG{n+na}{Content\PYGZhy{}Type}\PYG{o}{:} \PYG{l}{application/json}

\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}vehiculo\PYGZus{}id\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{1}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}codigo\PYGZus{}dtc\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}P0301\PYGZdq{}}\PYG{p}{,}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}P0420\PYGZdq{}}\PYG{p}{,}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}P0171\PYGZdq{}}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Responses}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{200 OK}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}mensaje\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Errores del vehículo guardados correctamente\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{400 Bad Request}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Formato inválido, lista vacía, duplicados, vehiculo\_id negativo.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Lista de códigos vacía o contiene duplicados\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{404 Not Found}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Vehículo no encontrado o no pertenece al usuario.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Vehículo no encontrado\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{401 Unauthorized}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Token inválido o expirado.

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{500 Internal Server Error}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Error interno al guardar.

\end{itemize}

\end{itemize}

\end{fulllineitems}



\subsection{Obtener Errores de un Vehículo}
\label{\detokenize{endpoints:obtener-errores-de-un-vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{endpoints:get--mis-errores-vehiculo_id}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{GET~}}\sphinxbfcode{\sphinxupquote{/mis\sphinxhyphen{}errores/\{vehiculo\_id\}}}}
\pysigstopsignatures
\sphinxAtStartPar
Obtiene todos los códigos DTC registrados para un vehículo.

\sphinxAtStartPar
\sphinxstylestrong{URL Parameters}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vehiculo\_id}} (integer, obligatorio)

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Ejemplo}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nf}{GET} \PYG{n+nn}{/mis\PYGZhy{}errores/1} \PYG{k+kr}{HTTP}\PYG{o}{/}\PYG{l+m}{1.1}
\PYG{n+na}{Host}\PYG{o}{:} \PYG{l}{api.ejemplo.com}
\PYG{n+na}{Authorization}\PYG{o}{:} \PYG{l}{Bearer eyJhbGciOi...}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Responses}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{200 OK}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}P0301\PYGZdq{}}\PYG{p}{,}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}P0420\PYGZdq{}}\PYG{p}{,}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}P0171\PYGZdq{}}\PYG{p}{]}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{404 Not Found}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Vehículo no existente o no tiene errores registrados.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}No se encontraron errores para este vehículo\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{401 Unauthorized}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Token inválido o expirado.

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{500 Internal Server Error}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Error interno al consultar la base de datos.

\end{itemize}

\end{itemize}

\end{fulllineitems}



\section{Generación y Consulta de Informes}
\label{\detokenize{endpoints:generacion-y-consulta-de-informes}}
\begin{sphinxadmonition}{note}{Nota:}
\sphinxAtStartPar
La creación del informe envía un correo con un enlace público (token UUID).
Ver también en “Modelos” la tabla \sphinxcode{\sphinxupquote{InformeCompartido}}.
\end{sphinxadmonition}


\subsection{Crear Informe para un Vehículo}
\label{\detokenize{endpoints:crear-informe-para-un-vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{endpoints:post--crear-informe-vehiculo_id}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{POST~}}\sphinxbfcode{\sphinxupquote{/crear\sphinxhyphen{}informe/\{vehiculo\_id\}}}}
\pysigstopsignatures
\sphinxAtStartPar
Genera un informe HTML con todos los errores de un vehículo y lo envía por correo al cliente.
Se crea un token único para acceso público.

\sphinxAtStartPar
\sphinxstylestrong{URL Parameters}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vehiculo\_id}} (integer, obligatorio)

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Request Body} (\sphinxcode{\sphinxupquote{InformeRequest}}):
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{email}} (string, obligatorio, debe contener «@»).

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Flujo Interno}:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Verificar que \sphinxcode{\sphinxupquote{vehiculo\_id}} existe y pertenece al usuario.

\item {} 
\sphinxAtStartPar
Recuperar lista de códigos DTC asociados.

\item {} 
\sphinxAtStartPar
Generar un token UUID único (\sphinxcode{\sphinxupquote{uuid4()}}) y guardar en tabla \sphinxcode{\sphinxupquote{informes\_compartidos}}.

\item {} 
\sphinxAtStartPar
Crear plantilla HTML (botón con enlace a \sphinxcode{\sphinxupquote{/informe/\{token\}}}).

\item {} 
\sphinxAtStartPar
Enviar correo con FastAPI\sphinxhyphen{}Mail.

\end{enumerate}

\sphinxAtStartPar
\sphinxstylestrong{Ejemplo}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nf}{POST} \PYG{n+nn}{/crear\PYGZhy{}informe/1} \PYG{k+kr}{HTTP}\PYG{o}{/}\PYG{l+m}{1.1}
\PYG{n+na}{Host}\PYG{o}{:} \PYG{l}{api.ejemplo.com}
\PYG{n+na}{Authorization}\PYG{o}{:} \PYG{l}{Bearer eyJhbGciOi...}
\PYG{n+na}{Content\PYGZhy{}Type}\PYG{o}{:} \PYG{l}{application/json}

\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}email\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}cliente@dominio.com\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Responses}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{200 OK}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}mensaje\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Informe creado y enviado al email\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}token\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}550e8400\PYGZhy{}e29b\PYGZhy{}41d4\PYGZhy{}a716\PYGZhy{}446655440000\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}enlace\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}https://tudominio.com/taller\PYGZhy{}front/informe/550e8400\PYGZhy{}e29b\PYGZhy{}41d4\PYGZhy{}a716\PYGZhy{}446655440000\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{400 Bad Request}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Email inválido (no contiene «@») o faltan datos.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Formato de email inválido\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{404 Not Found}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Vehículo no existe o no pertenece al usuario.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Vehículo no encontrado\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{401 Unauthorized}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Token inválido o expirado.

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{500 Internal Server Error}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Error al guardar token o enviar correo.

\end{itemize}

\end{itemize}

\end{fulllineitems}



\section{Ver Informe Público}
\label{\detokenize{endpoints:ver-informe-publico}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{endpoints:get--informe-token}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{GET~}}\sphinxbfcode{\sphinxupquote{/informe/\{token\}}}}
\pysigstopsignatures
\sphinxAtStartPar
Permite a cualquier usuario (sin autenticación) ver el informe de diagnóstico de un vehículo, siempre que posea el token correcto.

\sphinxAtStartPar
\sphinxstylestrong{URL Parameters}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{token}} (string, obligatorio, longitud mínima 10)

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Flujo Interno}:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
Validar longitud mínima de \sphinxcode{\sphinxupquote{token}} (10 caracteres).

\item {} 
\sphinxAtStartPar
Buscar registro en tabla \sphinxcode{\sphinxupquote{informes\_compartidos}}.

\item {} 
\sphinxAtStartPar
Recuperar datos de vehículo e historial de errores.

\item {} 
\sphinxAtStartPar
Devolver JSON con datos del vehículo y lista de errores.

\end{enumerate}

\sphinxAtStartPar
\sphinxstylestrong{Ejemplo}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nf}{GET} \PYG{n+nn}{/informe/550e8400\PYGZhy{}e29b\PYGZhy{}41d4\PYGZhy{}a716\PYGZhy{}446655440000} \PYG{k+kr}{HTTP}\PYG{o}{/}\PYG{l+m}{1.1}
\PYG{n+na}{Host}\PYG{o}{:} \PYG{l}{api.ejemplo.com}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Responses}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{200 OK}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}vehiculo\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{\PYGZob{}}
\PYG{+w}{    }\PYG{n+nt}{\PYGZdq{}marca\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Toyota\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{    }\PYG{n+nt}{\PYGZdq{}modelo\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Corolla\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{    }\PYG{n+nt}{\PYGZdq{}year\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{2020}\PYG{p}{,}
\PYG{+w}{    }\PYG{n+nt}{\PYGZdq{}vin\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}JTDBL40E799017833\PYGZdq{}}\PYG{p}{,}
\PYG{+w}{    }\PYG{n+nt}{\PYGZdq{}rpm\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{1500}\PYG{p}{,}
\PYG{+w}{    }\PYG{n+nt}{\PYGZdq{}velocidad\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+m+mi}{80}\PYG{p}{,}
\PYG{+w}{    }\PYG{n+nt}{\PYGZdq{}revision\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{\PYGZob{}}\PYG{n+nt}{\PYGZdq{}tipo\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Anual\PYGZdq{}}\PYG{p}{,}\PYG{+w}{ }\PYG{n+nt}{\PYGZdq{}fecha\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}2025\PYGZhy{}01\PYGZhy{}10\PYGZdq{}}\PYG{p}{\PYGZcb{}}
\PYG{+w}{  }\PYG{p}{\PYGZcb{},}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}errores\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}P0301\PYGZdq{}}\PYG{p}{,}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}P0420\PYGZdq{}}\PYG{p}{]}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{400 Bad Request}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Token inválido (longitud \textless{} 10).

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Token inválido\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{404 Not Found}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Token no encontrado o informe expirado.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}Informe no encontrado\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{500 Internal Server Error}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Error interno al procesar la solicitud.

\end{itemize}

\end{itemize}

\end{fulllineitems}



\section{Servicio de Imágenes de Vehículo}
\label{\detokenize{endpoints:servicio-de-imagenes-de-vehiculo}}

\subsection{Obtener URL de Imagen de Vehículo}
\label{\detokenize{endpoints:obtener-url-de-imagen-de-vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{endpoints:get--car-imagery-}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{GET~}}\sphinxbfcode{\sphinxupquote{/car\sphinxhyphen{}imagery/}}}
\pysigstopsignatures
\sphinxAtStartPar
Recupera una URL de imagen de vehículo usando la API externa de \sphinxstylestrong{carimagery.com}.

\sphinxAtStartPar
\sphinxstylestrong{Query Parameters}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{searchTerm}} (string, obligatorio)
Ejemplo: \sphinxcode{\sphinxupquote{searchTerm=Toyota\%20Corolla\%202020}}

\end{itemize}

\sphinxAtStartPar
\sphinxstylestrong{Ejemplo}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nf}{GET} \PYG{n+nn}{/car\PYGZhy{}imagery/?searchTerm=Toyota\PYGZpc{}20Corolla\PYGZpc{}202020} \PYG{k+kr}{HTTP}\PYG{o}{/}\PYG{l+m}{1.1}
\PYG{n+na}{Host}\PYG{o}{:} \PYG{l}{api.ejemplo.com}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Responses}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{200 OK}

\sphinxAtStartPar
Devuelve texto o XML con la URL de la imagen, por ejemplo:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nt}{\PYGZlt{}CarImagery}\PYG{n+nt}{\PYGZgt{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZlt{}ImageUrl}\PYG{n+nt}{\PYGZgt{}}https://imagenes.com/ford\PYGZus{}focus\PYGZus{}2020.jpg\PYG{n+nt}{\PYGZlt{}/ImageUrl\PYGZgt{}}
\PYG{n+nt}{\PYGZlt{}/CarImagery\PYGZgt{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{400 Bad Request}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Si falta \sphinxcode{\sphinxupquote{searchTerm}} o está vacío.

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}detail\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}searchTerm es obligatorio\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{500 Internal Server Error}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Error al conectar con la API externa.

\end{itemize}

\end{itemize}

\end{fulllineitems}



\section{Endpoint de Prueba / Salud}
\label{\detokenize{endpoints:endpoint-de-prueba-salud}}

\subsection{Salud / Ping}
\label{\detokenize{endpoints:salud-ping}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{endpoints:get--saludo}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{GET~}}\sphinxbfcode{\sphinxupquote{/saludo}}}
\pysigstopsignatures
\sphinxAtStartPar
Endpoint simple para verificar que la API está en funcionamiento.

\sphinxAtStartPar
\sphinxstylestrong{Ejemplo}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nf}{GET} \PYG{n+nn}{/saludo} \PYG{k+kr}{HTTP}\PYG{o}{/}\PYG{l+m}{1.1}
\PYG{n+na}{Host}\PYG{o}{:} \PYG{l}{api.ejemplo.com}
\end{sphinxVerbatim}

\sphinxAtStartPar
\sphinxstylestrong{Responses}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{200 OK}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{p}{\PYGZob{}}
\PYG{+w}{  }\PYG{n+nt}{\PYGZdq{}mensaje\PYGZdq{}}\PYG{p}{:}\PYG{+w}{ }\PYG{l+s+s2}{\PYGZdq{}¡La API está funcionando correctamente!\PYGZdq{}}
\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}

\end{itemize}

\end{fulllineitems}


\sphinxstepscope


\chapter{Modelos de Datos}
\label{\detokenize{modelos:modelos-de-datos}}\label{\detokenize{modelos::doc}}
\sphinxAtStartPar
En esta sección se describen en detalle los \sphinxstylestrong{modelos ORM} (SQLAlchemy) y los \sphinxstylestrong{modelos de validación} (Pydantic) definidos en \sphinxtitleref{main.py}. Se incluyen tablas con atributos, tipos, relaciones y ejemplos de uso.


\section{Modelos ORM (SQLAlchemy)}
\label{\detokenize{modelos:modelos-orm-sqlalchemy}}
\sphinxAtStartPar
Los modelos ORM representan las tablas de la base de datos, heredan de \sphinxtitleref{Base} y están definidos en \sphinxtitleref{main.py}. A continuación se listan sus atributos principales, tipos y descripciones.


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabulary}{\linewidth}[t]{TTTT}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
\sphinxstylestrong{Clase}
&\sphinxstyletheadfamily 
\sphinxAtStartPar
\sphinxstylestrong{Atributo}
&\sphinxstyletheadfamily 
\sphinxAtStartPar
\sphinxstylestrong{Tipo}
&\sphinxstyletheadfamily 
\sphinxAtStartPar
\sphinxstylestrong{Descripción}
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Usuario}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{id}}
&
\sphinxAtStartPar
Integer (PK)
&
\sphinxAtStartPar
Identificador único autoincremental.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Usuario}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{username}}
&
\sphinxAtStartPar
String(255), único
&
\sphinxAtStartPar
Nombre de usuario (único).
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Usuario}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{password\_hash}}
&
\sphinxAtStartPar
String(255)
&
\sphinxAtStartPar
Contraseña almacenada (hash bcrypt).
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Usuario}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vehiculos}}
&
\sphinxAtStartPar
Relationship
&
\sphinxAtStartPar
Relación uno\sphinxhyphen{}a\sphinxhyphen{}muchos con \sphinxcode{\sphinxupquote{Vehiculo}}.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Vehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{id}}
&
\sphinxAtStartPar
Integer (PK)
&
\sphinxAtStartPar
Identificador del vehículo.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Vehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{marca}}
&
\sphinxAtStartPar
String(255)
&
\sphinxAtStartPar
Marca del vehículo.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Vehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{modelo}}
&
\sphinxAtStartPar
String(255)
&
\sphinxAtStartPar
Modelo del vehículo.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Vehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{year}}
&
\sphinxAtStartPar
Integer
&
\sphinxAtStartPar
Año de fabricación (YYYY).
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Vehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{rpm}}
&
\sphinxAtStartPar
Integer
&
\sphinxAtStartPar
Revoluciones por minuto.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Vehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{velocidad}}
&
\sphinxAtStartPar
Integer
&
\sphinxAtStartPar
Velocidad actual en km/h.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Vehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vin}}
&
\sphinxAtStartPar
String(17), único
&
\sphinxAtStartPar
Número VIN (único, 17 caracteres).
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Vehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{revision}}
&
\sphinxAtStartPar
String(255)
&
\sphinxAtStartPar
JSON serializado con detalles de la revisión.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Vehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{usuario\_id}}
&
\sphinxAtStartPar
Integer (FK)
&
\sphinxAtStartPar
Clave foránea a \sphinxcode{\sphinxupquote{Usuario.id}}.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Vehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{errores}}
&
\sphinxAtStartPar
Relationship
&
\sphinxAtStartPar
Relación uno\sphinxhyphen{}a\sphinxhyphen{}muchos con \sphinxcode{\sphinxupquote{ErrorVehiculo}}.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Vehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{informes\_compartidos}}
&
\sphinxAtStartPar
Relationship
&
\sphinxAtStartPar
Relación uno\sphinxhyphen{}a\sphinxhyphen{}muchos con \sphinxcode{\sphinxupquote{InformeCompartido}}.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{ErrorVehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{id}}
&
\sphinxAtStartPar
Integer (PK)
&
\sphinxAtStartPar
Identificador del error DTC.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{ErrorVehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vehiculo\_id}}
&
\sphinxAtStartPar
Integer (FK)
&
\sphinxAtStartPar
Clave foránea a \sphinxcode{\sphinxupquote{Vehiculo.id}}.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{ErrorVehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{codigo\_dtc}}
&
\sphinxAtStartPar
String(255)
&
\sphinxAtStartPar
Código OBD\sphinxhyphen{}II (p. ej., \sphinxcode{\sphinxupquote{P0301}}).
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{ErrorVehiculo}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vehiculo}}
&
\sphinxAtStartPar
Relationship
&
\sphinxAtStartPar
Vínculo inverso a \sphinxcode{\sphinxupquote{Vehiculo}}.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{InformeCompartido}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{id}}
&
\sphinxAtStartPar
Integer (PK)
&
\sphinxAtStartPar
Identificador del informe.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{InformeCompartido}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{token}}
&
\sphinxAtStartPar
String(100), único
&
\sphinxAtStartPar
Token UUID público para compartir.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{InformeCompartido}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vehiculo\_id}}
&
\sphinxAtStartPar
Integer (FK)
&
\sphinxAtStartPar
Clave foránea a \sphinxcode{\sphinxupquote{Vehiculo.id}}.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{InformeCompartido}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{email\_cliente}}
&
\sphinxAtStartPar
String(255)
&
\sphinxAtStartPar
Email del destinatario.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{InformeCompartido}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{creado\_en}}
&
\sphinxAtStartPar
DateTime
&
\sphinxAtStartPar
Fecha y hora de creación (UTC).
\\
\sphinxbottomrule
\end{tabulary}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}

\sphinxAtStartPar
\sphinxstylestrong{Relaciones entre Tablas}:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Usuario}} \(\leftrightarrow\) \sphinxcode{\sphinxupquote{Vehiculo}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Uno a muchos:
\begin{itemize}
\item {} 
\sphinxAtStartPar
En \sphinxcode{\sphinxupquote{Usuario}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{vehiculos} \PYG{o}{=} \PYG{n}{relationship}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Vehiculo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{back\PYGZus{}populates}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{usuario}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{cascade}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{all, delete\PYGZhy{}orphan}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
En \sphinxcode{\sphinxupquote{Vehiculo}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{usuario} \PYG{o}{=} \PYG{n}{relationship}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Usuario}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{back\PYGZus{}populates}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{vehiculos}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\end{itemize}

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Vehiculo}} \(\leftrightarrow\) \sphinxcode{\sphinxupquote{ErrorVehiculo}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Uno a muchos:
\begin{itemize}
\item {} 
\sphinxAtStartPar
En \sphinxcode{\sphinxupquote{Vehiculo}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{errores} \PYG{o}{=} \PYG{n}{relationship}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{ErrorVehiculo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{back\PYGZus{}populates}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{vehiculo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{cascade}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{all, delete\PYGZhy{}orphan}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
En \sphinxcode{\sphinxupquote{ErrorVehiculo}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{vehiculo} \PYG{o}{=} \PYG{n}{relationship}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Vehiculo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{back\PYGZus{}populates}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{errores}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\end{itemize}

\end{itemize}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{Vehiculo}} \(\leftrightarrow\) \sphinxcode{\sphinxupquote{InformeCompartido}}
\begin{itemize}
\item {} 
\sphinxAtStartPar
Uno a muchos:
\begin{itemize}
\item {} 
\sphinxAtStartPar
En \sphinxcode{\sphinxupquote{Vehiculo}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{informes\PYGZus{}compartidos} \PYG{o}{=} \PYG{n}{relationship}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{InformeCompartido}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{back\PYGZus{}populates}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{vehiculo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{cascade}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{all, delete\PYGZhy{}orphan}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
En \sphinxcode{\sphinxupquote{InformeCompartido}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{vehiculo} \PYG{o}{=} \PYG{n}{relationship}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Vehiculo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{n}{back\PYGZus{}populates}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{informes\PYGZus{}compartidos}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\end{itemize}

\end{itemize}

\end{itemize}


\subsection{Ejemplo de Esquema en SQL}
\label{\detokenize{modelos:ejemplo-de-esquema-en-sql}}
\sphinxAtStartPar
A modo de referencia, a continuación se muestra un esquema simplificado en SQL que refleja la estructura anterior:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{k}{CREATE}\PYG{+w}{ }\PYG{k}{TABLE}\PYG{+w}{ }\PYG{n}{usuarios}\PYG{+w}{ }\PYG{p}{(}
\PYG{+w}{    }\PYG{n}{id}\PYG{+w}{ }\PYG{n+nb}{INT}\PYG{+w}{ }\PYG{n}{AUTO\PYGZus{}INCREMENT}\PYG{+w}{ }\PYG{k}{PRIMARY}\PYG{+w}{ }\PYG{k}{KEY}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{username}\PYG{+w}{ }\PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{255}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{UNIQUE}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{password\PYGZus{}hash}\PYG{+w}{ }\PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{255}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}
\PYG{p}{)}\PYG{p}{;}

\PYG{k}{CREATE}\PYG{+w}{ }\PYG{k}{TABLE}\PYG{+w}{ }\PYG{n}{vehiculos}\PYG{+w}{ }\PYG{p}{(}
\PYG{+w}{    }\PYG{n}{id}\PYG{+w}{ }\PYG{n+nb}{INT}\PYG{+w}{ }\PYG{n}{AUTO\PYGZus{}INCREMENT}\PYG{+w}{ }\PYG{k}{PRIMARY}\PYG{+w}{ }\PYG{k}{KEY}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{marca}\PYG{+w}{ }\PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{255}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{modelo}\PYG{+w}{ }\PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{255}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{k}{year}\PYG{+w}{ }\PYG{n+nb}{INT}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{rpm}\PYG{+w}{ }\PYG{n+nb}{INT}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{velocidad}\PYG{+w}{ }\PYG{n+nb}{INT}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{vin}\PYG{+w}{ }\PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{17}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{UNIQUE}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{revision}\PYG{+w}{ }\PYG{n+nb}{TEXT}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{usuario\PYGZus{}id}\PYG{+w}{ }\PYG{n+nb}{INT}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{k}{FOREIGN}\PYG{+w}{ }\PYG{k}{KEY}\PYG{+w}{ }\PYG{p}{(}\PYG{n}{usuario\PYGZus{}id}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{REFERENCES}\PYG{+w}{ }\PYG{n}{usuarios}\PYG{p}{(}\PYG{n}{id}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{ON}\PYG{+w}{ }\PYG{k}{DELETE}\PYG{+w}{ }\PYG{k}{CASCADE}
\PYG{p}{)}\PYG{p}{;}

\PYG{k}{CREATE}\PYG{+w}{ }\PYG{k}{TABLE}\PYG{+w}{ }\PYG{n}{error\PYGZus{}vehiculo}\PYG{+w}{ }\PYG{p}{(}
\PYG{+w}{    }\PYG{n}{id}\PYG{+w}{ }\PYG{n+nb}{INT}\PYG{+w}{ }\PYG{n}{AUTO\PYGZus{}INCREMENT}\PYG{+w}{ }\PYG{k}{PRIMARY}\PYG{+w}{ }\PYG{k}{KEY}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{vehiculo\PYGZus{}id}\PYG{+w}{ }\PYG{n+nb}{INT}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{codigo\PYGZus{}dtc}\PYG{+w}{ }\PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{255}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{k}{FOREIGN}\PYG{+w}{ }\PYG{k}{KEY}\PYG{+w}{ }\PYG{p}{(}\PYG{n}{vehiculo\PYGZus{}id}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{REFERENCES}\PYG{+w}{ }\PYG{n}{vehiculos}\PYG{p}{(}\PYG{n}{id}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{ON}\PYG{+w}{ }\PYG{k}{DELETE}\PYG{+w}{ }\PYG{k}{CASCADE}
\PYG{p}{)}\PYG{p}{;}

\PYG{k}{CREATE}\PYG{+w}{ }\PYG{k}{TABLE}\PYG{+w}{ }\PYG{n}{informes\PYGZus{}compartidos}\PYG{+w}{ }\PYG{p}{(}
\PYG{+w}{    }\PYG{n}{id}\PYG{+w}{ }\PYG{n+nb}{INT}\PYG{+w}{ }\PYG{n}{AUTO\PYGZus{}INCREMENT}\PYG{+w}{ }\PYG{k}{PRIMARY}\PYG{+w}{ }\PYG{k}{KEY}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{token}\PYG{+w}{ }\PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{100}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{UNIQUE}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{vehiculo\PYGZus{}id}\PYG{+w}{ }\PYG{n+nb}{INT}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{email\PYGZus{}cliente}\PYG{+w}{ }\PYG{n+nb}{VARCHAR}\PYG{p}{(}\PYG{l+m+mi}{255}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{n}{creado\PYGZus{}en}\PYG{+w}{ }\PYG{n}{DATETIME}\PYG{+w}{ }\PYG{k}{NOT}\PYG{+w}{ }\PYG{k}{NULL}\PYG{p}{,}
\PYG{+w}{    }\PYG{k}{FOREIGN}\PYG{+w}{ }\PYG{k}{KEY}\PYG{+w}{ }\PYG{p}{(}\PYG{n}{vehiculo\PYGZus{}id}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{REFERENCES}\PYG{+w}{ }\PYG{n}{vehiculos}\PYG{p}{(}\PYG{n}{id}\PYG{p}{)}\PYG{+w}{ }\PYG{k}{ON}\PYG{+w}{ }\PYG{k}{DELETE}\PYG{+w}{ }\PYG{k}{CASCADE}
\PYG{p}{)}\PYG{p}{;}
\end{sphinxVerbatim}


\section{Modelos de Validación (Pydantic)}
\label{\detokenize{modelos:modelos-de-validacion-pydantic}}
\sphinxAtStartPar
Los modelos Pydantic garantizan que las peticiones entrantes y salidas cumplan con un esquema específico. Se utilizan en los endpoints para validar datos de usuario, vehículo, errores e informes.


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabular}[t]{\X{20}{120}\X{50}{120}\X{50}{120}}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
\sphinxstylestrong{Clase}
&\sphinxstyletheadfamily 
\sphinxAtStartPar
\sphinxstylestrong{Campos}
&\sphinxstyletheadfamily 
\sphinxAtStartPar
\sphinxstylestrong{Descripción}
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{UsuarioRegistro}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{username}} (string, obligatorio, mínimo 3 caracteres)
&
\sphinxAtStartPar
Nombre de usuario.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{UsuarioRegistro}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{password}} (string, obligatorio, mínimo 6 caracteres)
&
\sphinxAtStartPar
Contraseña.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{UsuarioLogin}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{username}} (string, obligatorio)
&
\sphinxAtStartPar
Nombre de usuario.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{UsuarioLogin}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{password}} (string, obligatorio)
&
\sphinxAtStartPar
Contraseña.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{VehiculoRegistro}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{marca}} (string, obligatorio)
&
\sphinxAtStartPar
Marca del vehículo.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{VehiculoRegistro}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{modelo}} (string, obligatorio)
&
\sphinxAtStartPar
Modelo del vehículo.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{VehiculoRegistro}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{year}} (integer, obligatorio, YYYY)
&
\sphinxAtStartPar
Año de fabricación.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{VehiculoRegistro}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{rpm}} (integer, obligatorio)
&
\sphinxAtStartPar
Revoluciones por minuto.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{VehiculoRegistro}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{velocidad}} (integer, obligatorio)
&
\sphinxAtStartPar
Velocidad actual en km/h.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{VehiculoRegistro}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vin}} (string de longitud 17, obligatorio)
&
\sphinxAtStartPar
Número VIN único.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{VehiculoRegistro}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{revision}} (dict con claves obligatorias y opcionales)
&
\sphinxAtStartPar
Detalles de revisión: \sphinxcode{\sphinxupquote{tipo}}, \sphinxcode{\sphinxupquote{fecha}}, \sphinxcode{\sphinxupquote{observaciones}}.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{VehiculoEdicion}}
&
\sphinxAtStartPar
(mismos campos que \sphinxcode{\sphinxupquote{VehiculoRegistro}} excepto \sphinxcode{\sphinxupquote{revision}})
&
\sphinxAtStartPar
Usado para actualizar vehículos existentes.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{ErrorVehiculoRegistro}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{vehiculo\_id}} (integer, obligatorio)
&
\sphinxAtStartPar
ID del vehículo.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{ErrorVehiculoRegistro}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{codigo\_dtc}} (list{[}string{]}, obligatorio)
&
\sphinxAtStartPar
Lista de códigos DTC.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{InformeRequest}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{email}} (string, obligatorio, debe contener «@»)
&
\sphinxAtStartPar
Email del cliente.
\\
\sphinxbottomrule
\end{tabular}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}


\subsection{Validaciones Clave}
\label{\detokenize{modelos:validaciones-clave}}\begin{itemize}
\item {} 
\sphinxAtStartPar
En \sphinxcode{\sphinxupquote{UsuarioRegistro}} y \sphinxcode{\sphinxupquote{UsuarioLogin}} se verifica longitud mínima de \sphinxtitleref{username} y \sphinxtitleref{password}.

\item {} 
\sphinxAtStartPar
En \sphinxcode{\sphinxupquote{VehiculoRegistro}} y \sphinxcode{\sphinxupquote{VehiculoEdicion}} se exige que \sphinxtitleref{vin} sea exactamente 17 caracteres y único en la base de datos.

\item {} 
\sphinxAtStartPar
En \sphinxcode{\sphinxupquote{ErrorVehiculoRegistro}} se valida que \sphinxtitleref{vehiculo\_id} exista y que la lista \sphinxtitleref{codigo\_dtc} no esté vacía ni tenga duplicados.

\item {} 
\sphinxAtStartPar
En \sphinxcode{\sphinxupquote{InformeRequest}} se comprueba que \sphinxtitleref{email} contenga el carácter “@”.

\end{itemize}


\subsection{Ejemplo de Uso en un Endpoint}
\label{\detokenize{modelos:ejemplo-de-uso-en-un-endpoint}}
\sphinxAtStartPar
Por ejemplo, en el endpoint \sphinxtitleref{/guardar\sphinxhyphen{}vehiculo/}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nd}{@app}\PYG{o}{.}\PYG{n}{post}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{/guardar\PYGZhy{}vehiculo/}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{crear\PYGZus{}vehiculo}\PYG{p}{(}
    \PYG{n}{vehiculo}\PYG{p}{:} \PYG{n}{VehiculoRegistro}\PYG{p}{,}
    \PYG{n}{db}\PYG{p}{:} \PYG{n}{Session} \PYG{o}{=} \PYG{n}{Depends}\PYG{p}{(}\PYG{n}{get\PYGZus{}db}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{usuario}\PYG{p}{:} \PYG{n}{Usuario} \PYG{o}{=} \PYG{n}{Depends}\PYG{p}{(}\PYG{n}{obtener\PYGZus{}usuario\PYGZus{}desde\PYGZus{}token}\PYG{p}{)}
\PYG{p}{)}\PYG{p}{:}
    \PYG{c+c1}{\PYGZsh{} Aquí \PYGZsq{}vehiculo\PYGZsq{} ya está validado por Pydantic:}
    \PYG{c+c1}{\PYGZsh{}   vehiculo.marca (str), vehiculo.modelo (str), vehiculo.vin (str de 17 chars), etc.}
    \PYG{n}{nuevo} \PYG{o}{=} \PYG{n}{models}\PYG{o}{.}\PYG{n}{Vehiculo}\PYG{p}{(}
        \PYG{n}{marca}\PYG{o}{=}\PYG{n}{vehiculo}\PYG{o}{.}\PYG{n}{marca}\PYG{p}{,}
        \PYG{n}{modelo}\PYG{o}{=}\PYG{n}{vehiculo}\PYG{o}{.}\PYG{n}{modelo}\PYG{p}{,}
        \PYG{n}{year}\PYG{o}{=}\PYG{n}{vehiculo}\PYG{o}{.}\PYG{n}{year}\PYG{p}{,}
        \PYG{n}{rpm}\PYG{o}{=}\PYG{n}{vehiculo}\PYG{o}{.}\PYG{n}{rpm}\PYG{p}{,}
        \PYG{n}{velocidad}\PYG{o}{=}\PYG{n}{vehiculo}\PYG{o}{.}\PYG{n}{velocidad}\PYG{p}{,}
        \PYG{n}{vin}\PYG{o}{=}\PYG{n}{vehiculo}\PYG{o}{.}\PYG{n}{vin}\PYG{p}{,}
        \PYG{n}{revision}\PYG{o}{=}\PYG{n}{json}\PYG{o}{.}\PYG{n}{dumps}\PYG{p}{(}\PYG{n}{vehiculo}\PYG{o}{.}\PYG{n}{revision}\PYG{p}{)}\PYG{p}{,}
        \PYG{n}{usuario\PYGZus{}id}\PYG{o}{=}\PYG{n}{usuario}\PYG{o}{.}\PYG{n}{id}
    \PYG{p}{)}
    \PYG{n}{db}\PYG{o}{.}\PYG{n}{add}\PYG{p}{(}\PYG{n}{nuevo}\PYG{p}{)}
    \PYG{n}{db}\PYG{o}{.}\PYG{n}{commit}\PYG{p}{(}\PYG{p}{)}
    \PYG{n}{db}\PYG{o}{.}\PYG{n}{refresh}\PYG{p}{(}\PYG{n}{nuevo}\PYG{p}{)}
    \PYG{k}{return} \PYG{p}{\PYGZob{}}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mensaje}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{Vehículo guardado correctamente}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{id}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{:} \PYG{n}{nuevo}\PYG{o}{.}\PYG{n}{id}\PYG{p}{\PYGZcb{}}
\end{sphinxVerbatim}


\subsection{Referencia Automática}
\label{\detokenize{modelos:referencia-automatica}}
\sphinxAtStartPar
Para revisar el código completo de cada clase (atributos adicionales, métodos, relaciones, validaciones), se ha añadido la directiva \sphinxtitleref{.. automodule:: main} más abajo:
\index{module@\spxentry{module}!main@\spxentry{main}}\index{main@\spxentry{main}!module@\spxentry{module}}\index{Base (clase en main)@\spxentry{Base}\spxextra{clase en main}}\phantomsection\label{\detokenize{modelos:module-main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Base}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{Base}}}
{\sphinxparam{\DUrole{o}{**}\DUrole{n}{kwargs}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{Any}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{object}}

\sphinxAtStartPar
Configuración del sistema de envío de correos (FastAPI Mail):
\begin{itemize}
\item {} 
\sphinxAtStartPar
Las credenciales y parámetros se cargan desde variables de entorno.

\item {} 
\sphinxAtStartPar
\sphinxtitleref{FastMail} se instancia con esta configuración para ser usado en envíos.

\end{itemize}
\index{metadata (atributo de main.Base)@\spxentry{metadata}\spxextra{atributo de main.Base}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Base.metadata}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{metadata}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }MetaData}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }MetaData()}}}
\pysigstopsignatures
\end{fulllineitems}

\index{registry (atributo de main.Base)@\spxentry{registry}\spxextra{atributo de main.Base}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Base.registry}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{registry}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }registry}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }\textless{}sqlalchemy.orm.decl\_api.registry object\textgreater{}}}}
\pysigstopsignatures
\end{fulllineitems}


\end{fulllineitems}

\index{ErrorVehiculo (clase en main)@\spxentry{ErrorVehiculo}\spxextra{clase en main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.ErrorVehiculo}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{ErrorVehiculo}}}
{\sphinxparam{\DUrole{o}{**}\DUrole{n}{kwargs}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: {\hyperref[\detokenize{modelos:main.Base}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{Base}}}}}

\sphinxAtStartPar
Modelo ORM que almacena los errores OBD\sphinxhyphen{}II (códigos DTC) de un vehículo.
\begin{description}
\sphinxlineitem{Atributos:}
\sphinxAtStartPar
id (int): ID del error.
vehiculo\_id (int): ID del vehículo asociado.
codigo\_dtc (str): Código de diagnóstico (ej. P0301).

\sphinxlineitem{Relaciones:}
\sphinxAtStartPar
vehiculo (Vehiculo): Vehículo asociado.

\end{description}
\index{codigo\_dtc (atributo de main.ErrorVehiculo)@\spxentry{codigo\_dtc}\spxextra{atributo de main.ErrorVehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.ErrorVehiculo.codigo_dtc}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{codigo\_dtc}}}
\pysigstopsignatures
\end{fulllineitems}

\index{id (atributo de main.ErrorVehiculo)@\spxentry{id}\spxextra{atributo de main.ErrorVehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.ErrorVehiculo.id}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{id}}}
\pysigstopsignatures
\end{fulllineitems}

\index{vehiculo (atributo de main.ErrorVehiculo)@\spxentry{vehiculo}\spxextra{atributo de main.ErrorVehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.ErrorVehiculo.vehiculo}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{vehiculo}}}
\pysigstopsignatures
\end{fulllineitems}

\index{vehiculo\_id (atributo de main.ErrorVehiculo)@\spxentry{vehiculo\_id}\spxextra{atributo de main.ErrorVehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.ErrorVehiculo.vehiculo_id}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{vehiculo\_id}}}
\pysigstopsignatures
\end{fulllineitems}


\end{fulllineitems}

\index{ErrorVehiculoRegistro (clase en main)@\spxentry{ErrorVehiculoRegistro}\spxextra{clase en main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.ErrorVehiculoRegistro}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{ErrorVehiculoRegistro}}}
{\sphinxparam{\DUrole{keyword-only-separator}{\DUrole{o}{\sphinxstyleabbreviation{*} (Keyword\sphinxhyphen{}only parameters separator (PEP 3102))}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{codigo\_dtc}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{list\DUrole{p}{{[}}str\DUrole{p}{{]}}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{vehiculo\_id}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{BaseModel}}

\sphinxAtStartPar
Modelo de solicitud para registrar errores OBD\sphinxhyphen{}II de un vehículo.
\begin{description}
\sphinxlineitem{Atributos:}
\sphinxAtStartPar
codigo\_dtc (list{[}str{]}): Lista de códigos DTC (códigos de diagnóstico).
vehiculo\_id (int): ID del vehículo al que se le asocian los errores.

\end{description}
\index{codigo\_dtc (atributo de main.ErrorVehiculoRegistro)@\spxentry{codigo\_dtc}\spxextra{atributo de main.ErrorVehiculoRegistro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.ErrorVehiculoRegistro.codigo_dtc}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{codigo\_dtc}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }list\DUrole{p}{{[}}str\DUrole{p}{{]}}}}}
\pysigstopsignatures
\end{fulllineitems}

\index{model\_config (atributo de main.ErrorVehiculoRegistro)@\spxentry{model\_config}\spxextra{atributo de main.ErrorVehiculoRegistro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.ErrorVehiculoRegistro.model_config}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{model\_config}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }ClassVar\DUrole{p}{{[}}ConfigDict\DUrole{p}{{]}}}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }\{\}}}}
\pysigstopsignatures
\sphinxAtStartPar
Configuration for the model, should be a dictionary conforming to {[}\sphinxtitleref{ConfigDict}{]}{[}pydantic.config.ConfigDict{]}.

\end{fulllineitems}

\index{vehiculo\_id (atributo de main.ErrorVehiculoRegistro)@\spxentry{vehiculo\_id}\spxextra{atributo de main.ErrorVehiculoRegistro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.ErrorVehiculoRegistro.vehiculo_id}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{vehiculo\_id}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }int}}}
\pysigstopsignatures
\end{fulllineitems}


\end{fulllineitems}

\index{InformeCompartido (clase en main)@\spxentry{InformeCompartido}\spxextra{clase en main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.InformeCompartido}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{InformeCompartido}}}
{\sphinxparam{\DUrole{o}{**}\DUrole{n}{kwargs}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: {\hyperref[\detokenize{modelos:main.Base}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{Base}}}}}

\sphinxAtStartPar
Modelo ORM que representa un informe compartido con un cliente por email.
\begin{description}
\sphinxlineitem{Atributos:}
\sphinxAtStartPar
id (int): ID del informe.
token (str): Token único para acceder al informe.
vehiculo\_id (int): ID del vehículo relacionado.
email\_cliente (str): Email al que se envía el informe.
creado\_en (str): Fecha y hora de creación del informe (ISO format).

\sphinxlineitem{Relaciones:}
\sphinxAtStartPar
vehiculo (Vehiculo): Vehículo asociado.

\end{description}
\index{creado\_en (atributo de main.InformeCompartido)@\spxentry{creado\_en}\spxextra{atributo de main.InformeCompartido}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.InformeCompartido.creado_en}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{creado\_en}}}
\pysigstopsignatures
\end{fulllineitems}

\index{email\_cliente (atributo de main.InformeCompartido)@\spxentry{email\_cliente}\spxextra{atributo de main.InformeCompartido}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.InformeCompartido.email_cliente}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{email\_cliente}}}
\pysigstopsignatures
\end{fulllineitems}

\index{id (atributo de main.InformeCompartido)@\spxentry{id}\spxextra{atributo de main.InformeCompartido}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.InformeCompartido.id}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{id}}}
\pysigstopsignatures
\end{fulllineitems}

\index{token (atributo de main.InformeCompartido)@\spxentry{token}\spxextra{atributo de main.InformeCompartido}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.InformeCompartido.token}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{token}}}
\pysigstopsignatures
\end{fulllineitems}

\index{vehiculo (atributo de main.InformeCompartido)@\spxentry{vehiculo}\spxextra{atributo de main.InformeCompartido}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.InformeCompartido.vehiculo}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{vehiculo}}}
\pysigstopsignatures
\end{fulllineitems}

\index{vehiculo\_id (atributo de main.InformeCompartido)@\spxentry{vehiculo\_id}\spxextra{atributo de main.InformeCompartido}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.InformeCompartido.vehiculo_id}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{vehiculo\_id}}}
\pysigstopsignatures
\end{fulllineitems}


\end{fulllineitems}

\index{InformeRequest (clase en main)@\spxentry{InformeRequest}\spxextra{clase en main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.InformeRequest}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{InformeRequest}}}
{\sphinxparam{\DUrole{keyword-only-separator}{\DUrole{o}{\sphinxstyleabbreviation{*}}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{email}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{BaseModel}}

\sphinxAtStartPar
Modelo de solicitud para generar y enviar un informe por correo.
\begin{description}
\sphinxlineitem{Atributos:}
\sphinxAtStartPar
email (str): Dirección de email del cliente destinatario.

\end{description}
\index{email (atributo de main.InformeRequest)@\spxentry{email}\spxextra{atributo de main.InformeRequest}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.InformeRequest.email}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{email}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{model\_config (atributo de main.InformeRequest)@\spxentry{model\_config}\spxextra{atributo de main.InformeRequest}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.InformeRequest.model_config}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{model\_config}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }ClassVar\DUrole{p}{{[}}ConfigDict\DUrole{p}{{]}}}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }\{\}}}}
\pysigstopsignatures
\sphinxAtStartPar
Configuration for the model, should be a dictionary conforming to {[}\sphinxtitleref{ConfigDict}{]}{[}pydantic.config.ConfigDict{]}.

\end{fulllineitems}


\end{fulllineitems}

\index{Usuario (clase en main)@\spxentry{Usuario}\spxextra{clase en main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Usuario}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{Usuario}}}
{\sphinxparam{\DUrole{o}{**}\DUrole{n}{kwargs}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: {\hyperref[\detokenize{modelos:main.Base}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{Base}}}}}

\sphinxAtStartPar
Modelo ORM que representa a los usuarios del sistema.
\begin{description}
\sphinxlineitem{Atributos:}
\sphinxAtStartPar
id (int): ID autoincremental (clave primaria).
username (str): Nombre de usuario, único.
password\_hash (str): Contraseña hasheada con bcrypt.

\sphinxlineitem{Relaciones:}
\sphinxAtStartPar
vehiculos (List{[}Vehiculo{]}): Lista de vehículos registrados por el usuario.

\end{description}
\index{id (atributo de main.Usuario)@\spxentry{id}\spxextra{atributo de main.Usuario}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Usuario.id}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{id}}}
\pysigstopsignatures
\end{fulllineitems}

\index{password\_hash (atributo de main.Usuario)@\spxentry{password\_hash}\spxextra{atributo de main.Usuario}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Usuario.password_hash}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{password\_hash}}}
\pysigstopsignatures
\end{fulllineitems}

\index{username (atributo de main.Usuario)@\spxentry{username}\spxextra{atributo de main.Usuario}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Usuario.username}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{username}}}
\pysigstopsignatures
\end{fulllineitems}

\index{vehiculos (atributo de main.Usuario)@\spxentry{vehiculos}\spxextra{atributo de main.Usuario}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Usuario.vehiculos}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{vehiculos}}}
\pysigstopsignatures
\end{fulllineitems}


\end{fulllineitems}

\index{UsuarioLogin (clase en main)@\spxentry{UsuarioLogin}\spxextra{clase en main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.UsuarioLogin}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{UsuarioLogin}}}
{\sphinxparam{\DUrole{keyword-only-separator}{\DUrole{o}{\sphinxstyleabbreviation{*}}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{username}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{password}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{BaseModel}}

\sphinxAtStartPar
Modelo de solicitud para iniciar sesión de usuario.
\begin{description}
\sphinxlineitem{Atributos:}
\sphinxAtStartPar
username (str): Nombre de usuario.
password (str): Contraseña en texto plano.

\end{description}
\index{model\_config (atributo de main.UsuarioLogin)@\spxentry{model\_config}\spxextra{atributo de main.UsuarioLogin}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.UsuarioLogin.model_config}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{model\_config}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }ClassVar\DUrole{p}{{[}}ConfigDict\DUrole{p}{{]}}}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }\{\}}}}
\pysigstopsignatures
\sphinxAtStartPar
Configuration for the model, should be a dictionary conforming to {[}\sphinxtitleref{ConfigDict}{]}{[}pydantic.config.ConfigDict{]}.

\end{fulllineitems}

\index{password (atributo de main.UsuarioLogin)@\spxentry{password}\spxextra{atributo de main.UsuarioLogin}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.UsuarioLogin.password}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{password}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{username (atributo de main.UsuarioLogin)@\spxentry{username}\spxextra{atributo de main.UsuarioLogin}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.UsuarioLogin.username}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{username}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}


\end{fulllineitems}

\index{UsuarioRegistro (clase en main)@\spxentry{UsuarioRegistro}\spxextra{clase en main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.UsuarioRegistro}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{UsuarioRegistro}}}
{\sphinxparam{\DUrole{keyword-only-separator}{\DUrole{o}{\sphinxstyleabbreviation{*}}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{username}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{password}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{BaseModel}}

\sphinxAtStartPar
Modelo de solicitud para registrar un nuevo usuario.
\begin{description}
\sphinxlineitem{Atributos:}
\sphinxAtStartPar
username (str): Nombre de usuario.
password (str): Contraseña en texto plano.

\end{description}
\index{model\_config (atributo de main.UsuarioRegistro)@\spxentry{model\_config}\spxextra{atributo de main.UsuarioRegistro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.UsuarioRegistro.model_config}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{model\_config}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }ClassVar\DUrole{p}{{[}}ConfigDict\DUrole{p}{{]}}}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }\{\}}}}
\pysigstopsignatures
\sphinxAtStartPar
Configuration for the model, should be a dictionary conforming to {[}\sphinxtitleref{ConfigDict}{]}{[}pydantic.config.ConfigDict{]}.

\end{fulllineitems}

\index{password (atributo de main.UsuarioRegistro)@\spxentry{password}\spxextra{atributo de main.UsuarioRegistro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.UsuarioRegistro.password}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{password}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{username (atributo de main.UsuarioRegistro)@\spxentry{username}\spxextra{atributo de main.UsuarioRegistro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.UsuarioRegistro.username}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{username}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}


\end{fulllineitems}

\index{Vehiculo (clase en main)@\spxentry{Vehiculo}\spxextra{clase en main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Vehiculo}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{Vehiculo}}}
{\sphinxparam{\DUrole{o}{**}\DUrole{n}{kwargs}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: {\hyperref[\detokenize{modelos:main.Base}]{\sphinxcrossref{\sphinxcode{\sphinxupquote{Base}}}}}

\sphinxAtStartPar
Modelo ORM que representa un vehículo registrado.
\begin{description}
\sphinxlineitem{Atributos:}
\sphinxAtStartPar
id (int): ID del vehículo.
marca (str): Marca del vehículo.
modelo (str): Modelo del vehículo.
year (int): Año de fabricación.
rpm (int): Revoluciones por minuto.
velocidad (int): Velocidad actual.
vin (str): Número VIN único del vehículo.
revision (str): Información de revisión técnica.
usuario\_id (int): ID del usuario al que pertenece el vehículo.

\sphinxlineitem{Relaciones:}
\sphinxAtStartPar
usuario (Usuario): Usuario propietario.
errores (List{[}ErrorVehiculo{]}): Lista de errores asociados.
informes\_compartidos (List{[}InformeCompartido{]}): Informes generados con token público.

\end{description}
\index{errores (atributo de main.Vehiculo)@\spxentry{errores}\spxextra{atributo de main.Vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Vehiculo.errores}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{errores}}}
\pysigstopsignatures
\end{fulllineitems}

\index{id (atributo de main.Vehiculo)@\spxentry{id}\spxextra{atributo de main.Vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Vehiculo.id}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{id}}}
\pysigstopsignatures
\end{fulllineitems}

\index{informes\_compartidos (atributo de main.Vehiculo)@\spxentry{informes\_compartidos}\spxextra{atributo de main.Vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Vehiculo.informes_compartidos}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{informes\_compartidos}}}
\pysigstopsignatures
\end{fulllineitems}

\index{marca (atributo de main.Vehiculo)@\spxentry{marca}\spxextra{atributo de main.Vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Vehiculo.marca}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{marca}}}
\pysigstopsignatures
\end{fulllineitems}

\index{modelo (atributo de main.Vehiculo)@\spxentry{modelo}\spxextra{atributo de main.Vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Vehiculo.modelo}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{modelo}}}
\pysigstopsignatures
\end{fulllineitems}

\index{revision (atributo de main.Vehiculo)@\spxentry{revision}\spxextra{atributo de main.Vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Vehiculo.revision}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{revision}}}
\pysigstopsignatures
\end{fulllineitems}

\index{rpm (atributo de main.Vehiculo)@\spxentry{rpm}\spxextra{atributo de main.Vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Vehiculo.rpm}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{rpm}}}
\pysigstopsignatures
\end{fulllineitems}

\index{usuario (atributo de main.Vehiculo)@\spxentry{usuario}\spxextra{atributo de main.Vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Vehiculo.usuario}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{usuario}}}
\pysigstopsignatures
\end{fulllineitems}

\index{usuario\_id (atributo de main.Vehiculo)@\spxentry{usuario\_id}\spxextra{atributo de main.Vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Vehiculo.usuario_id}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{usuario\_id}}}
\pysigstopsignatures
\end{fulllineitems}

\index{velocidad (atributo de main.Vehiculo)@\spxentry{velocidad}\spxextra{atributo de main.Vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Vehiculo.velocidad}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{velocidad}}}
\pysigstopsignatures
\end{fulllineitems}

\index{vin (atributo de main.Vehiculo)@\spxentry{vin}\spxextra{atributo de main.Vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Vehiculo.vin}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{vin}}}
\pysigstopsignatures
\end{fulllineitems}

\index{year (atributo de main.Vehiculo)@\spxentry{year}\spxextra{atributo de main.Vehiculo}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.Vehiculo.year}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{year}}}
\pysigstopsignatures
\end{fulllineitems}


\end{fulllineitems}

\index{VehiculoEdicion (clase en main)@\spxentry{VehiculoEdicion}\spxextra{clase en main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoEdicion}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{VehiculoEdicion}}}
{\sphinxparam{\DUrole{keyword-only-separator}{\DUrole{o}{\sphinxstyleabbreviation{*}}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{marca}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{modelo}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{year}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}\sphinxparamcomma \sphinxparam{\DUrole{n}{rpm}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}\sphinxparamcomma \sphinxparam{\DUrole{n}{velocidad}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}\sphinxparamcomma \sphinxparam{\DUrole{n}{vin}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{BaseModel}}

\sphinxAtStartPar
Modelo de solicitud para editar un vehículo existente.
\begin{description}
\sphinxlineitem{Atributos:}
\sphinxAtStartPar
marca (str): Marca del vehículo.
modelo (str): Modelo del vehículo.
year (int): Año de fabricación.
rpm (int): Revoluciones por minuto.
velocidad (int): Velocidad actual.
vin (str): Número VIN del vehículo.

\end{description}
\index{marca (atributo de main.VehiculoEdicion)@\spxentry{marca}\spxextra{atributo de main.VehiculoEdicion}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoEdicion.marca}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{marca}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{model\_config (atributo de main.VehiculoEdicion)@\spxentry{model\_config}\spxextra{atributo de main.VehiculoEdicion}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoEdicion.model_config}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{model\_config}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }ClassVar\DUrole{p}{{[}}ConfigDict\DUrole{p}{{]}}}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }\{\}}}}
\pysigstopsignatures
\sphinxAtStartPar
Configuration for the model, should be a dictionary conforming to {[}\sphinxtitleref{ConfigDict}{]}{[}pydantic.config.ConfigDict{]}.

\end{fulllineitems}

\index{modelo (atributo de main.VehiculoEdicion)@\spxentry{modelo}\spxextra{atributo de main.VehiculoEdicion}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoEdicion.modelo}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{modelo}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{rpm (atributo de main.VehiculoEdicion)@\spxentry{rpm}\spxextra{atributo de main.VehiculoEdicion}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoEdicion.rpm}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{rpm}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }int}}}
\pysigstopsignatures
\end{fulllineitems}

\index{velocidad (atributo de main.VehiculoEdicion)@\spxentry{velocidad}\spxextra{atributo de main.VehiculoEdicion}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoEdicion.velocidad}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{velocidad}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }int}}}
\pysigstopsignatures
\end{fulllineitems}

\index{vin (atributo de main.VehiculoEdicion)@\spxentry{vin}\spxextra{atributo de main.VehiculoEdicion}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoEdicion.vin}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{vin}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{year (atributo de main.VehiculoEdicion)@\spxentry{year}\spxextra{atributo de main.VehiculoEdicion}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoEdicion.year}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{year}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }int}}}
\pysigstopsignatures
\end{fulllineitems}


\end{fulllineitems}

\index{VehiculoRegistro (clase en main)@\spxentry{VehiculoRegistro}\spxextra{clase en main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoRegistro}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{class}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{VehiculoRegistro}}}
{\sphinxparam{\DUrole{keyword-only-separator}{\DUrole{o}{\sphinxstyleabbreviation{*}}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{marca}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{modelo}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{year}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}\sphinxparamcomma \sphinxparam{\DUrole{n}{rpm}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}\sphinxparamcomma \sphinxparam{\DUrole{n}{velocidad}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}\sphinxparamcomma \sphinxparam{\DUrole{n}{vin}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{revision}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{dict}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Bases: \sphinxcode{\sphinxupquote{BaseModel}}

\sphinxAtStartPar
Modelo de solicitud para registrar un nuevo vehículo.
\begin{description}
\sphinxlineitem{Atributos:}
\sphinxAtStartPar
marca (str): Marca del vehículo.
modelo (str): Modelo del vehículo.
year (int): Año del vehículo.
rpm (int): RPM del motor.
velocidad (int): Velocidad del vehículo.
vin (str): Número VIN único del vehículo.
revision (dict): Detalles de la revisión técnica (estructura flexible).

\end{description}
\index{marca (atributo de main.VehiculoRegistro)@\spxentry{marca}\spxextra{atributo de main.VehiculoRegistro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoRegistro.marca}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{marca}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{model\_config (atributo de main.VehiculoRegistro)@\spxentry{model\_config}\spxextra{atributo de main.VehiculoRegistro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoRegistro.model_config}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{model\_config}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }ClassVar\DUrole{p}{{[}}ConfigDict\DUrole{p}{{]}}}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }\{\}}}}
\pysigstopsignatures
\sphinxAtStartPar
Configuration for the model, should be a dictionary conforming to {[}\sphinxtitleref{ConfigDict}{]}{[}pydantic.config.ConfigDict{]}.

\end{fulllineitems}

\index{modelo (atributo de main.VehiculoRegistro)@\spxentry{modelo}\spxextra{atributo de main.VehiculoRegistro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoRegistro.modelo}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{modelo}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{revision (atributo de main.VehiculoRegistro)@\spxentry{revision}\spxextra{atributo de main.VehiculoRegistro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoRegistro.revision}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{revision}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }dict}}}
\pysigstopsignatures
\end{fulllineitems}

\index{rpm (atributo de main.VehiculoRegistro)@\spxentry{rpm}\spxextra{atributo de main.VehiculoRegistro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoRegistro.rpm}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{rpm}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }int}}}
\pysigstopsignatures
\end{fulllineitems}

\index{velocidad (atributo de main.VehiculoRegistro)@\spxentry{velocidad}\spxextra{atributo de main.VehiculoRegistro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoRegistro.velocidad}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{velocidad}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }int}}}
\pysigstopsignatures
\end{fulllineitems}

\index{vin (atributo de main.VehiculoRegistro)@\spxentry{vin}\spxextra{atributo de main.VehiculoRegistro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoRegistro.vin}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{vin}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }str}}}
\pysigstopsignatures
\end{fulllineitems}

\index{year (atributo de main.VehiculoRegistro)@\spxentry{year}\spxextra{atributo de main.VehiculoRegistro}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.VehiculoRegistro.year}}
\pysigstartsignatures
\pysigline
{\sphinxbfcode{\sphinxupquote{year}}\sphinxbfcode{\sphinxupquote{\DUrole{p}{:}\DUrole{w}{ }int}}}
\pysigstopsignatures
\end{fulllineitems}


\end{fulllineitems}

\index{crear\_informe() (en el módulo main)@\spxentry{crear\_informe()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.crear_informe}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{async}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{crear\_informe}}}
{\sphinxparam{\DUrole{n}{vehiculo\_id}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}\sphinxparamcomma \sphinxparam{\DUrole{n}{request}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{modelos:main.InformeRequest}]{\sphinxcrossref{InformeRequest}}}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{usuario}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{Usuario}}}}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(obtener\_usuario\_desde\_token)}}\sphinxparamcomma \sphinxparam{\DUrole{n}{db}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{Session}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(get\_db)}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Crea un informe de errores del vehículo y lo envía al email del cliente.

\sphinxAtStartPar
Este endpoint genera un enlace único que da acceso a una vista del informe de diagnóstico del vehículo. Se envía un correo al cliente con dicho enlace.
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{vehiculo\_id}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} ID del vehículo del que se desea generar el informe.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{request}} ({\hyperref[\detokenize{modelos:main.InformeRequest}]{\sphinxcrossref{\sphinxstyleliteralemphasis{\sphinxupquote{InformeRequest}}}}}) \textendash{} Objeto que contiene el email del cliente.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{usuario}} ({\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{\sphinxstyleliteralemphasis{\sphinxupquote{Usuario}}}}}) \textendash{} Usuario autenticado mediante JWT.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{db}} (\sphinxstyleliteralemphasis{\sphinxupquote{Session}}) \textendash{} Sesión activa de la base de datos.

\end{itemize}

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
Mensaje de éxito, token generado y enlace de acceso.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
dict

\sphinxlineitem{Muestra}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 400}} \textendash{} Si el email no es válido.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 404}} \textendash{} Si el vehículo no pertenece al usuario.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 500}} \textendash{} Si ocurre un error al guardar el informe o enviar el correo.

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{crear\_token() (en el módulo main)@\spxentry{crear\_token()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.crear_token}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{crear\_token}}}
{\sphinxparam{\DUrole{n}{data}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{dict}}\sphinxparamcomma \sphinxparam{\DUrole{n}{expira\_en}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{300}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Genera un token JWT con los datos proporcionados y un tiempo de expiración opcional.
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{datos}} (\sphinxstyleliteralemphasis{\sphinxupquote{dict}}) \textendash{} Datos a incluir en el payload del token.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{tiempo\_expiracion}} (\sphinxstyleliteralemphasis{\sphinxupquote{Optional}}\sphinxstyleliteralemphasis{\sphinxupquote{{[}}}\sphinxstyleliteralemphasis{\sphinxupquote{timedelta}}\sphinxstyleliteralemphasis{\sphinxupquote{{]}}}) \textendash{} Tiempo personalizado de expiración. Si no se especifica, se usarán 30 minutos por defecto.

\end{itemize}

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
Token JWT firmado.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
str

\sphinxlineitem{Muestra}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{Exception}} \textendash{} Si hay un error al codificar el token.

\end{description}\end{quote}

\end{fulllineitems}

\index{editar\_vehiculo() (en el módulo main)@\spxentry{editar\_vehiculo()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.editar_vehiculo}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{editar\_vehiculo}}}
{\sphinxparam{\DUrole{n}{vehiculo\_id}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}\sphinxparamcomma \sphinxparam{\DUrole{n}{datos}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{modelos:main.VehiculoEdicion}]{\sphinxcrossref{VehiculoEdicion}}}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{usuario}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{Usuario}}}}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(obtener\_usuario\_desde\_token)}}\sphinxparamcomma \sphinxparam{\DUrole{n}{db}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{Session}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(get\_db)}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Actualiza los datos de un vehículo existente del usuario autenticado.
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{vehiculo\_id}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} ID del vehículo a modificar.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{datos\_actualizados}} (\sphinxstyleliteralemphasis{\sphinxupquote{VehiculoBase}}) \textendash{} Nuevos datos del vehículo.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{db}} (\sphinxstyleliteralemphasis{\sphinxupquote{Session}}) \textendash{} Sesión de base de datos.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{usuario}} ({\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{\sphinxstyleliteralemphasis{\sphinxupquote{Usuario}}}}}) \textendash{} Usuario autenticado.

\end{itemize}

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
Mensaje de éxito.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
dict

\sphinxlineitem{Muestra}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 404}} \textendash{} Si el vehículo no existe o no pertenece al usuario.

\end{description}\end{quote}

\end{fulllineitems}

\index{eliminar\_vehiculo() (en el módulo main)@\spxentry{eliminar\_vehiculo()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.eliminar_vehiculo}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{eliminar\_vehiculo}}}
{\sphinxparam{\DUrole{n}{vehiculo\_id}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}\sphinxparamcomma \sphinxparam{\DUrole{n}{usuario}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{Usuario}}}}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(obtener\_usuario\_desde\_token)}}\sphinxparamcomma \sphinxparam{\DUrole{n}{db}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{Session}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(get\_db)}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Elimina un vehículo registrado por el usuario autenticado.
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{vehiculo\_id}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} ID del vehículo a eliminar.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{db}} (\sphinxstyleliteralemphasis{\sphinxupquote{Session}}) \textendash{} Sesión de base de datos.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{usuario}} ({\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{\sphinxstyleliteralemphasis{\sphinxupquote{Usuario}}}}}) \textendash{} Usuario autenticado mediante JWT.

\end{itemize}

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
Mensaje de éxito.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
dict

\sphinxlineitem{Muestra}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 404}} \textendash{} Si el vehículo no existe o no pertenece al usuario.

\end{description}\end{quote}

\end{fulllineitems}

\index{fm (en el módulo main)@\spxentry{fm}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.fm}}
\pysigstartsignatures
\pysigline
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{fm}}\sphinxbfcode{\sphinxupquote{\DUrole{w}{ }\DUrole{p}{=}\DUrole{w}{ }\textless{}fastapi\_mail.fastmail.FastMail object\textgreater{}}}}
\pysigstopsignatures
\sphinxAtStartPar
Configuración de seguridad:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxtitleref{SECRET\_KEY}, \sphinxtitleref{ALGORITHM} y tiempo de expiración definen la seguridad del JWT.

\item {} 
\sphinxAtStartPar
\sphinxtitleref{pwd\_context} se usa para hashear contraseñas con bcrypt.

\item {} 
\sphinxAtStartPar
\sphinxtitleref{oauth2\_scheme} se usa como dependencia para extraer el token del header Authorization.

\end{itemize}

\end{fulllineitems}

\index{get\_car\_image() (en el módulo main)@\spxentry{get\_car\_image()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.get_car_image}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{get\_car\_image}}}
{\sphinxparam{\DUrole{n}{searchTerm}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Obtiene una URL de imagen representativa de un vehículo usando el término de búsqueda proporcionado.

\sphinxAtStartPar
Este endpoint consulta la API externa de carimagery.com para devolver la URL de una imagen que coincida con el término (por ejemplo, «Toyota Corolla 2020»).
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{searchTerm}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} Término de búsqueda del vehículo (marca, modelo, año, etc.).

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
URL de la imagen del vehículo.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
str

\sphinxlineitem{Muestra}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 500}} \textendash{} Si hay un error al consultar la API externa.

\end{description}\end{quote}

\end{fulllineitems}

\index{guardar\_errores() (en el módulo main)@\spxentry{guardar\_errores()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.guardar_errores}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{guardar\_errores}}}
{\sphinxparam{\DUrole{n}{datos}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{modelos:main.ErrorVehiculoRegistro}]{\sphinxcrossref{ErrorVehiculoRegistro}}}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{usuario}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{Usuario}}}}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(obtener\_usuario\_desde\_token)}}\sphinxparamcomma \sphinxparam{\DUrole{n}{db}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{Session}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(get\_db)}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Guarda una lista de códigos de error OBD\sphinxhyphen{}II (DTC) asociados a un vehículo del usuario autenticado.

\sphinxAtStartPar
Este endpoint es utilizado por el cliente Python que recibe errores del escáner OBD\sphinxhyphen{}II y los envía al backend para su almacenamiento.
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{datos}} ({\hyperref[\detokenize{modelos:main.ErrorVehiculoRegistro}]{\sphinxcrossref{\sphinxstyleliteralemphasis{\sphinxupquote{ErrorVehiculoRegistro}}}}}) \textendash{} Objeto que contiene el ID del vehículo y una lista de códigos DTC.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{usuario}} ({\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{\sphinxstyleliteralemphasis{\sphinxupquote{Usuario}}}}}) \textendash{} Usuario autenticado, obtenido desde el token JWT.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{db}} (\sphinxstyleliteralemphasis{\sphinxupquote{Session}}) \textendash{} Sesión activa de la base de datos.

\end{itemize}

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
Mensaje de confirmación si los errores fueron guardados correctamente.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
dict

\sphinxlineitem{Muestra}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 400}} \textendash{} \begin{itemize}
\item {} 
\sphinxAtStartPar
Si el ID del vehículo no es válido (no entero o negativo).
    \sphinxhyphen{} Si la lista de códigos está vacía o contiene valores vacíos.
    \sphinxhyphen{} Si hay códigos DTC duplicados.

\end{itemize}


\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 404}} \textendash{} Si el vehículo no pertenece al usuario autenticado.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 500}} \textendash{} Si ocurre un error inesperado al guardar en la base de datos.

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{guardar\_vehiculo() (en el módulo main)@\spxentry{guardar\_vehiculo()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.guardar_vehiculo}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{guardar\_vehiculo}}}
{\sphinxparam{\DUrole{n}{datos}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{modelos:main.VehiculoRegistro}]{\sphinxcrossref{VehiculoRegistro}}}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{usuario}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{Usuario}}}}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(obtener\_usuario\_desde\_token)}}\sphinxparamcomma \sphinxparam{\DUrole{n}{db}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{Session}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(get\_db)}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Guarda un nuevo vehículo en la base de datos asociado al usuario autenticado.
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{vehiculo}} (\sphinxstyleliteralemphasis{\sphinxupquote{VehiculoBase}}) \textendash{} Datos del vehículo (marca, modelo, año, color, etc.).

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{db}} (\sphinxstyleliteralemphasis{\sphinxupquote{Session}}) \textendash{} Sesión de base de datos.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{usuario}} ({\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{\sphinxstyleliteralemphasis{\sphinxupquote{Usuario}}}}}) \textendash{} Usuario autenticado, extraído desde el token JWT.

\end{itemize}

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
Mensaje de confirmación.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
dict

\sphinxlineitem{Muestra}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 401}} \textendash{} Si no se proporciona un token válido.

\end{description}\end{quote}

\end{fulllineitems}

\index{login() (en el módulo main)@\spxentry{login()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.login}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{login}}}
{\sphinxparam{\DUrole{n}{datos}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{modelos:main.UsuarioLogin}]{\sphinxcrossref{UsuarioLogin}}}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{db}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{Session}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(get\_db)}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Autentica al usuario y devuelve un token JWT válido.
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{datos}} ({\hyperref[\detokenize{modelos:main.UsuarioLogin}]{\sphinxcrossref{\sphinxstyleliteralemphasis{\sphinxupquote{UsuarioLogin}}}}}) \textendash{} Credenciales de usuario.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{db}} (\sphinxstyleliteralemphasis{\sphinxupquote{Session}}) \textendash{} Sesión activa de la base de datos.

\end{itemize}

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
Token JWT si la autenticación fue exitosa.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
dict

\sphinxlineitem{Muestra}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 400}} \textendash{} Datos inválidos.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 401}} \textendash{} Usuario no encontrado o contraseña incorrecta.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 500}} \textendash{} Error al generar el token.

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{obtener\_errores() (en el módulo main)@\spxentry{obtener\_errores()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.obtener_errores}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{obtener\_errores}}}
{\sphinxparam{\DUrole{n}{vehiculo\_id}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}\sphinxparamcomma \sphinxparam{\DUrole{n}{usuario}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{Usuario}}}}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(obtener\_usuario\_desde\_token)}}\sphinxparamcomma \sphinxparam{\DUrole{n}{db}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{Session}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(get\_db)}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Devuelve todos los errores DTC (códigos OBD\sphinxhyphen{}II) asociados a un vehículo del usuario autenticado.
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{vehiculo\_id}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} ID del vehículo para el que se desean consultar los errores.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{usuario}} ({\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{\sphinxstyleliteralemphasis{\sphinxupquote{Usuario}}}}}) \textendash{} Usuario autenticado mediante JWT.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{db}} (\sphinxstyleliteralemphasis{\sphinxupquote{Session}}) \textendash{} Sesión activa de la base de datos.

\end{itemize}

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
Lista de errores registrados.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
List{[}{\hyperref[\detokenize{modelos:main.ErrorVehiculo}]{\sphinxcrossref{ErrorVehiculo}}}{]}

\sphinxlineitem{Muestra}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 404}} \textendash{} Si no existen errores para ese vehículo.

\end{description}\end{quote}

\end{fulllineitems}

\index{obtener\_usuario\_desde\_token() (en el módulo main)@\spxentry{obtener\_usuario\_desde\_token()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.obtener_usuario_desde_token}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{obtener\_usuario\_desde\_token}}}
{\sphinxparam{\DUrole{n}{token}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(OAuth2PasswordBearer)}}\sphinxparamcomma \sphinxparam{\DUrole{n}{db}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{Session}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(get\_db)}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Extrae y valida el usuario actual a partir del token JWT proporcionado.
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{token}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} Token JWT incluido en el encabezado de autorización.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{db}} (\sphinxstyleliteralemphasis{\sphinxupquote{Session}}) \textendash{} Sesión de base de datos.

\end{itemize}

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
Instancia del usuario autenticado.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
{\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{Usuario}}}

\sphinxlineitem{Muestra}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 401}} \textendash{} Si el token es inválido o ha expirado.

\end{description}\end{quote}

\end{fulllineitems}

\index{obtener\_vehiculo() (en el módulo main)@\spxentry{obtener\_vehiculo()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.obtener_vehiculo}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{obtener\_vehiculo}}}
{\sphinxparam{\DUrole{n}{vehiculo\_id}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{int}}\sphinxparamcomma \sphinxparam{\DUrole{n}{usuario}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{Usuario}}}}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(obtener\_usuario\_desde\_token)}}\sphinxparamcomma \sphinxparam{\DUrole{n}{db}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{Session}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(get\_db)}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Recupera la información de un vehículo específico registrado por el usuario autenticado.
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{vehiculo\_id}} (\sphinxstyleliteralemphasis{\sphinxupquote{int}}) \textendash{} ID del vehículo a consultar.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{usuario}} ({\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{\sphinxstyleliteralemphasis{\sphinxupquote{Usuario}}}}}) \textendash{} Usuario autenticado mediante JWT.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{db}} (\sphinxstyleliteralemphasis{\sphinxupquote{Session}}) \textendash{} Sesión activa de la base de datos.

\end{itemize}

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
Objeto del vehículo solicitado.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
{\hyperref[\detokenize{modelos:main.Vehiculo}]{\sphinxcrossref{Vehiculo}}}

\sphinxlineitem{Muestra}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 404}} \textendash{} Si el vehículo no pertenece al usuario o no existe.

\end{description}\end{quote}

\end{fulllineitems}

\index{obtener\_vehiculos() (en el módulo main)@\spxentry{obtener\_vehiculos()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.obtener_vehiculos}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{obtener\_vehiculos}}}
{\sphinxparam{\DUrole{n}{usuario}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{Usuario}}}}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(obtener\_usuario\_desde\_token)}}\sphinxparamcomma \sphinxparam{\DUrole{n}{db}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{Session}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(get\_db)}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Obtiene todos los vehículos registrados por el usuario autenticado.
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{db}} (\sphinxstyleliteralemphasis{\sphinxupquote{Session}}) \textendash{} Sesión de base de datos.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{usuario}} ({\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{\sphinxstyleliteralemphasis{\sphinxupquote{Usuario}}}}}) \textendash{} Usuario autenticado mediante JWT.

\end{itemize}

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
Lista de vehículos asociados al usuario.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
List{[}VehiculoBase{]}

\end{description}\end{quote}

\end{fulllineitems}

\index{register() (en el módulo main)@\spxentry{register()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.register}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{register}}}
{\sphinxparam{\DUrole{n}{datos}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{{\hyperref[\detokenize{modelos:main.UsuarioRegistro}]{\sphinxcrossref{UsuarioRegistro}}}}}\sphinxparamcomma \sphinxparam{\DUrole{n}{db}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{Session}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(get\_db)}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
\sphinxstylestrong{POST} \sphinxcode{\sphinxupquote{/register}}

\sphinxAtStartPar
Registra un nuevo usuario en la base de datos.

\sphinxAtStartPar
\sphinxstylestrong{Parámetros}:
\sphinxhyphen{} \sphinxcode{\sphinxupquote{datos}} (UsuarioRegistro): Objeto que contiene el nombre de usuario y la contraseña.
\sphinxhyphen{} \sphinxcode{\sphinxupquote{db}} (Session): Sesión activa de la base de datos, proporcionada por FastAPI.

\sphinxAtStartPar
\sphinxstylestrong{Retorna}:
\sphinxhyphen{} \sphinxcode{\sphinxupquote{dict}}: Un mensaje indicando si el usuario fue registrado exitosamente.

\sphinxAtStartPar
\sphinxstylestrong{Errores}:
\sphinxhyphen{} \sphinxcode{\sphinxupquote{400}}: Si los campos son inválidos o el nombre de usuario ya existe.

\end{fulllineitems}

\index{saludo() (en el módulo main)@\spxentry{saludo()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.saludo}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxbfcode{\sphinxupquote{\DUrole{k}{async}\DUrole{w}{ }}}\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{saludo}}}
{}
{}
\pysigstopsignatures
\sphinxAtStartPar
Devuelve un mensaje simple para verificar que la API está activa.

\sphinxAtStartPar
Este endpoint puede utilizarse para pruebas de conectividad o para confirmar que el backend está desplegado correctamente.
\begin{quote}\begin{description}
\sphinxlineitem{Devuelve}
\sphinxAtStartPar
Mensaje de saludo indicando que la API funciona.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
dict

\end{description}\end{quote}

\end{fulllineitems}

\index{ver\_informe() (en el módulo main)@\spxentry{ver\_informe()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.ver_informe}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{ver\_informe}}}
{\sphinxparam{\DUrole{n}{token}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}}\sphinxparamcomma \sphinxparam{\DUrole{n}{db}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{Session}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(get\_db)}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Devuelve los datos del informe generado a partir de un token único.

\sphinxAtStartPar
Este endpoint permite el acceso público a un informe de diagnóstico de vehículo mediante un enlace con token generado previamente. No requiere autenticación, pero valida que el token sea legítimo.
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{token}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} Token único del informe generado.

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
Información del vehículo (marca, modelo, año, etc.) y lista de errores DTC.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
dict

\sphinxlineitem{Muestra}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 400}} \textendash{} Si el token no es válido o demasiado corto.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 404}} \textendash{} Si no se encuentra el informe, el vehículo o los errores asociados.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 500}} \textendash{} Si ocurre un error inesperado al procesar la solicitud.

\end{itemize}

\end{description}\end{quote}

\end{fulllineitems}

\index{verificar\_password() (en el módulo main)@\spxentry{verificar\_password()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{modelos:main.verificar_password}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{verificar\_password}}}
{\sphinxparam{\DUrole{n}{plain\_password}}\sphinxparamcomma \sphinxparam{\DUrole{n}{hashed\_password}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Verifica si una contraseña en texto plano coincide con su hash almacenado.
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{password\_plano}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} Contraseña proporcionada por el usuario.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{password\_hash}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} Hash almacenado en la base de datos.

\end{itemize}

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
True si coinciden, False si no.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
bool

\end{description}\end{quote}

\end{fulllineitems}


\sphinxstepscope


\chapter{Configuración del Proyecto}
\label{\detokenize{configuracion:configuracion-del-proyecto}}\label{\detokenize{configuracion::doc}}
\sphinxAtStartPar
En esta sección se describe la configuración general del proyecto, desde la conexión a la base de datos hasta los parámetros de correo y seguridad. Toda la configuración se basa en variables de entorno que puedes definir en un archivo \sphinxtitleref{.env} o directamente en tu entorno.


\section{Configuración de Entorno}
\label{\detokenize{configuracion:configuracion-de-entorno}}
\sphinxAtStartPar
Para que la aplicación funcione correctamente, debes definir las siguientes variables de entorno (pueden estar en un archivo \sphinxtitleref{.env}):


\begin{savenotes}\sphinxattablestart
\sphinxthistablewithglobalstyle
\centering
\begin{tabular}[t]{\X{20}{80}\X{60}{80}}
\sphinxtoprule
\sphinxstyletheadfamily 
\sphinxAtStartPar
Variable
&\sphinxstyletheadfamily 
\sphinxAtStartPar
Descripción
\\
\sphinxmidrule
\sphinxtableatstartofbodyhook
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{DATABASE\_URL}}
&
\sphinxAtStartPar
URL de conexión a la base de datos MySQL (p. ej.: \sphinxcode{\sphinxupquote{mysql+pymysql://user:password@host:port/dbname}}).
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{MAIL\_USERNAME}}
&
\sphinxAtStartPar
Usuario para SMTP (FastAPI\sphinxhyphen{}Mail).
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{MAIL\_PASSWORD}}
&
\sphinxAtStartPar
Contraseña para SMTP.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{MAIL\_FROM}}
&
\sphinxAtStartPar
Correo desde el cual se enviarán los mensajes.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{MAIL\_PORT}}
&
\sphinxAtStartPar
Puerto SMTP (por defecto: 587).
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{MAIL\_SERVER}}
&
\sphinxAtStartPar
Servidor SMTP (p. ej.: \sphinxcode{\sphinxupquote{smtp.gmail.com}}).
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{MAIL\_STARTTLS}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{True}} si se debe usar STARTTLS.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{MAIL\_SSL\_TLS}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{True}} si se debe usar SSL/TLS.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{USE\_CREDENTIALS}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{True}} si se usan las credenciales definidas.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{VALIDATE\_CERTS}}
&
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{True}} para validar certificados SSL.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{SECRET\_KEY}}
&
\sphinxAtStartPar
Clave secreta para firmar JWT.
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{ALGORITHM}}
&
\sphinxAtStartPar
Algoritmo JWT (p. ej.: \sphinxcode{\sphinxupquote{HS256}}).
\\
\sphinxhline
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{ACCESS\_TOKEN\_EXPIRE\_MINUTES}}
&
\sphinxAtStartPar
Tiempo de expiración del token (en minutos).
\\
\sphinxbottomrule
\end{tabular}
\sphinxtableafterendhook\par
\sphinxattableend\end{savenotes}


\section{Base de Datos}
\label{\detokenize{configuracion:base-de-datos}}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{URL}: obtenida desde \sphinxcode{\sphinxupquote{DATABASE\_URL}}.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Motor}: MySQL con el driver PyMySQL.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{ORM}: SQLAlchemy.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Sesiones}: se genera con \sphinxcode{\sphinxupquote{SessionLocal()}} por request.

\end{itemize}

\sphinxAtStartPar
Declaración en código (\sphinxcode{\sphinxupquote{main.py}}):

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{c+c1}{\PYGZsh{} Configuración de la base de datos}
\PYG{n}{DATABASE\PYGZus{}URL} \PYG{o}{=} \PYG{n}{os}\PYG{o}{.}\PYG{n}{getenv}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{DATABASE\PYGZus{}URL}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{mysql+pymysql://user:password@db/talleres}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{n}{engine} \PYG{o}{=} \PYG{n}{create\PYGZus{}engine}\PYG{p}{(}\PYG{n}{DATABASE\PYGZus{}URL}\PYG{p}{)}
\PYG{n}{SessionLocal} \PYG{o}{=} \PYG{n}{sessionmaker}\PYG{p}{(}\PYG{n}{autocommit}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{,} \PYG{n}{autoflush}\PYG{o}{=}\PYG{k+kc}{False}\PYG{p}{,} \PYG{n}{bind}\PYG{o}{=}\PYG{n}{engine}\PYG{p}{)}
\PYG{n}{Base} \PYG{o}{=} \PYG{n}{declarative\PYGZus{}base}\PYG{p}{(}\PYG{p}{)}
\end{sphinxVerbatim}


\section{Correo Electrónico}
\label{\detokenize{configuracion:correo-electronico}}
\sphinxAtStartPar
La aplicación utiliza \sphinxstylestrong{FastAPI\sphinxhyphen{}Mail} para el envío de correos electrónicos (por ejemplo, para enviar informes generados).
\begin{itemize}
\item {} 
\sphinxAtStartPar
Se configuran las credenciales y parámetros de SMTP en la clase \sphinxcode{\sphinxupquote{ConnectionConfig}}.

\item {} 
\sphinxAtStartPar
Se soporta TLS y SSL según las variables \sphinxcode{\sphinxupquote{MAIL\_STARTTLS}} y \sphinxcode{\sphinxupquote{MAIL\_SSL\_TLS}}.

\item {} 
\sphinxAtStartPar
Ejemplo de uso en \sphinxcode{\sphinxupquote{main.py}}:

\end{itemize}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{conf} \PYG{o}{=} \PYG{n}{ConnectionConfig}\PYG{p}{(}
    \PYG{n}{MAIL\PYGZus{}USERNAME}\PYG{o}{=}\PYG{n}{os}\PYG{o}{.}\PYG{n}{getenv}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MAIL\PYGZus{}USERNAME}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{MAIL\PYGZus{}PASSWORD}\PYG{o}{=}\PYG{n}{os}\PYG{o}{.}\PYG{n}{getenv}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MAIL\PYGZus{}PASSWORD}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{MAIL\PYGZus{}FROM}\PYG{o}{=}\PYG{n}{os}\PYG{o}{.}\PYG{n}{getenv}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MAIL\PYGZus{}FROM}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{MAIL\PYGZus{}PORT}\PYG{o}{=}\PYG{n+nb}{int}\PYG{p}{(}\PYG{n}{os}\PYG{o}{.}\PYG{n}{getenv}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MAIL\PYGZus{}PORT}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+m+mi}{587}\PYG{p}{)}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{MAIL\PYGZus{}SERVER}\PYG{o}{=}\PYG{n}{os}\PYG{o}{.}\PYG{n}{getenv}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MAIL\PYGZus{}SERVER}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}\PYG{p}{,}
    \PYG{n}{MAIL\PYGZus{}STARTTLS}\PYG{o}{=}\PYG{n}{os}\PYG{o}{.}\PYG{n}{getenv}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MAIL\PYGZus{}STARTTLS}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{True}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{True}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{n}{MAIL\PYGZus{}SSL\PYGZus{}TLS}\PYG{o}{=}\PYG{n}{os}\PYG{o}{.}\PYG{n}{getenv}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{MAIL\PYGZus{}SSL\PYGZus{}TLS}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{False}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{True}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{n}{USE\PYGZus{}CREDENTIALS}\PYG{o}{=}\PYG{n}{os}\PYG{o}{.}\PYG{n}{getenv}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{USE\PYGZus{}CREDENTIALS}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{True}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{True}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,}
    \PYG{n}{VALIDATE\PYGZus{}CERTS}\PYG{o}{=}\PYG{n}{os}\PYG{o}{.}\PYG{n}{getenv}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{VALIDATE\PYGZus{}CERTS}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{,} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{True}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)} \PYG{o}{==} \PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{True}\PYG{l+s+s2}{\PYGZdq{}}
\PYG{p}{)}
\PYG{n}{fm} \PYG{o}{=} \PYG{n}{FastMail}\PYG{p}{(}\PYG{n}{conf}\PYG{p}{)}
\end{sphinxVerbatim}


\section{Seguridad}
\label{\detokenize{configuracion:seguridad}}
\sphinxAtStartPar
La autenticación y autorización se basan en JWT. A continuación se detallan los componentes clave:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{SECRET\_KEY}: clave secreta para firmar y verificar tokens JWT. Defínela en la variable de entorno \sphinxcode{\sphinxupquote{SECRET\_KEY}} o déjala en el código como fallback.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{ALGORITHM}: algoritmo para JWT, por defecto \sphinxcode{\sphinxupquote{HS256}}.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{ACCESS\_TOKEN\_EXPIRE\_MINUTES}: tiempo de expiración del token (en minutos). Se obtiene de la variable de entorno \sphinxcode{\sphinxupquote{ACCESS\_TOKEN\_EXPIRE\_MINUTES}} o usa 300 por defecto.

\item {} 
\sphinxAtStartPar
Para hashear contraseñas se utiliza \sphinxcode{\sphinxupquote{bcrypt}} a través de \sphinxcode{\sphinxupquote{passlib}}:

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n}{pwd\PYGZus{}context} \PYG{o}{=} \PYG{n}{CryptContext}\PYG{p}{(}\PYG{n}{schemes}\PYG{o}{=}\PYG{p}{[}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{bcrypt}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{]}\PYG{p}{,} \PYG{n}{deprecated}\PYG{o}{=}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{auto}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\end{sphinxVerbatim}

\item {} 
\sphinxAtStartPar
Para extraer el token de las peticiones, se usa \sphinxcode{\sphinxupquote{OAuth2PasswordBearer(tokenUrl="login")}}.

\end{itemize}

\sphinxAtStartPar
Flujo de autenticación en \sphinxcode{\sphinxupquote{main.py}}:
\begin{enumerate}
\sphinxsetlistlabels{\arabic}{enumi}{enumii}{}{.}%
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Registro}: el endpoint \sphinxcode{\sphinxupquote{/register}} recibe un \sphinxcode{\sphinxupquote{UsuarioRegistro}} (username + password), hashea la contraseña y la almacena.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Login}: el endpoint \sphinxcode{\sphinxupquote{/login}} recibe un \sphinxcode{\sphinxupquote{UsuarioLogin}}, verifica credenciales y, si es válido, genera un JWT con \sphinxcode{\sphinxupquote{crear\_token}}.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Dependencia \textasciigrave{}\textasciigrave{}obtener\_usuario\_desde\_token\textasciigrave{}\textasciigrave{}}: se encarga de decodificar el JWT, extraer el \sphinxcode{\sphinxupquote{sub}} (username) y cargar el usuario desde la base de datos. Si no encuentra usuario o el token está expirado, lanza \sphinxcode{\sphinxupquote{HTTPException(401)}}.

\end{enumerate}


\section{Dependencias reutilizables}
\label{\detokenize{configuracion:dependencias-reutilizables}}
\sphinxAtStartPar
A continuación se listan las funciones que puedes reusar en tus endpoints:
\index{module@\spxentry{module}!main@\spxentry{main}}\index{main@\spxentry{main}!module@\spxentry{module}}\index{get\_db() (en el módulo main)@\spxentry{get\_db()}\spxextra{en el módulo main}}\phantomsection\label{\detokenize{configuracion:module-main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{configuracion:main.get_db}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{get\_db}}}
{}
{}
\pysigstopsignatures
\sphinxAtStartPar
Dependencia de FastAPI para obtener una sesión de base de datos.

\sphinxAtStartPar
Se utiliza con \sphinxtitleref{Depends(get\_db)} para abrir una sesión, cederla al endpoint y cerrarla automáticamente.

\end{fulllineitems}

\index{obtener\_usuario\_desde\_token() (en el módulo main)@\spxentry{obtener\_usuario\_desde\_token()}\spxextra{en el módulo main}}

\begin{fulllineitems}
\phantomsection\label{\detokenize{configuracion:main.obtener_usuario_desde_token}}
\pysigstartsignatures
\pysiglinewithargsret
{\sphinxcode{\sphinxupquote{main.}}\sphinxbfcode{\sphinxupquote{obtener\_usuario\_desde\_token}}}
{\sphinxparam{\DUrole{n}{token}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{str}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(OAuth2PasswordBearer)}}\sphinxparamcomma \sphinxparam{\DUrole{n}{db}\DUrole{p}{:}\DUrole{w}{ }\DUrole{n}{Session}\DUrole{w}{ }\DUrole{o}{=}\DUrole{w}{ }\DUrole{default_value}{Depends(get\_db)}}}
{}
\pysigstopsignatures
\sphinxAtStartPar
Extrae y valida el usuario actual a partir del token JWT proporcionado.
\begin{quote}\begin{description}
\sphinxlineitem{Parámetros}\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{token}} (\sphinxstyleliteralemphasis{\sphinxupquote{str}}) \textendash{} Token JWT incluido en el encabezado de autorización.

\item {} 
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{db}} (\sphinxstyleliteralemphasis{\sphinxupquote{Session}}) \textendash{} Sesión de base de datos.

\end{itemize}

\sphinxlineitem{Devuelve}
\sphinxAtStartPar
Instancia del usuario autenticado.

\sphinxlineitem{Tipo del valor devuelto}
\sphinxAtStartPar
{\hyperref[\detokenize{modelos:main.Usuario}]{\sphinxcrossref{Usuario}}}

\sphinxlineitem{Muestra}
\sphinxAtStartPar
\sphinxstyleliteralstrong{\sphinxupquote{HTTPException 401}} \textendash{} Si el token es inválido o ha expirado.

\end{description}\end{quote}

\end{fulllineitems}

\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{get\_db()}}:
\sphinxhyphen{} Abre una sesión de base de datos (SQLAlchemy) y la cierra automáticamente al salir del contexto.
\sphinxhyphen{} Uso típico:
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nd}{@app}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{/ruta\PYGZus{}ejemplo}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{ejemplo}\PYG{p}{(}\PYG{n}{db}\PYG{p}{:} \PYG{n}{Session} \PYG{o}{=} \PYG{n}{Depends}\PYG{p}{(}\PYG{n}{get\PYGZus{}db}\PYG{p}{)}\PYG{p}{)}\PYG{p}{:}
    \PYG{c+c1}{\PYGZsh{} db es una sesión válida}
    \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\end{sphinxVerbatim}
\end{quote}

\item {} 
\sphinxAtStartPar
\sphinxcode{\sphinxupquote{obtener\_usuario\_desde\_token}}:
\sphinxhyphen{} Extrae el token JWT del encabezado \sphinxcode{\sphinxupquote{Authorization}} y devuelve la instancia de \sphinxcode{\sphinxupquote{Usuario}} correspondiente.
\sphinxhyphen{} Uso típico:
\begin{quote}

\begin{sphinxVerbatim}[commandchars=\\\{\}]
\PYG{n+nd}{@app}\PYG{o}{.}\PYG{n}{get}\PYG{p}{(}\PYG{l+s+s2}{\PYGZdq{}}\PYG{l+s+s2}{/ruta\PYGZus{}protegida}\PYG{l+s+s2}{\PYGZdq{}}\PYG{p}{)}
\PYG{k}{def}\PYG{+w}{ }\PYG{n+nf}{protegida}\PYG{p}{(}\PYG{n}{usuario}\PYG{p}{:} \PYG{n}{Usuario} \PYG{o}{=} \PYG{n}{Depends}\PYG{p}{(}\PYG{n}{obtener\PYGZus{}usuario\PYGZus{}desde\PYGZus{}token}\PYG{p}{)}\PYG{p}{)}\PYG{p}{:}
    \PYG{c+c1}{\PYGZsh{} usuario es el objeto Usuario autenticado}
    \PYG{o}{.}\PYG{o}{.}\PYG{o}{.}
\end{sphinxVerbatim}
\end{quote}

\end{itemize}

\sphinxAtStartPar
—

\sphinxAtStartPar
Esta documentación está estructurada de la siguiente manera:
\begin{itemize}
\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Introducción}: visión general del proyecto, tecnologías utilizadas y objetivos.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Endpoints}: listado completo de rutas disponibles, con ejemplos, parámetros y respuestas.

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Modelos de Datos}: descripción de las entidades ORM (SQLAlchemy) y los esquemas de validación (Pydantic).

\item {} 
\sphinxAtStartPar
\sphinxstylestrong{Configuración}: detalles sobre variables de entorno, conexión a bases de datos, correo electrónico, JWT y seguridad.

\end{itemize}


\renewcommand{\indexname}{Tabla de enrutamiento HTTP}
\begin{sphinxtheindex}
\let\bigletter\sphinxstyleindexlettergroup
\bigletter{/car\sphinxhyphen{}imagery}
\item\relax\sphinxstyleindexentry{GET /car\sphinxhyphen{}imagery/}\sphinxstyleindexpageref{endpoints:\detokenize{get--car-imagery-}}
\indexspace
\bigletter{/crear\sphinxhyphen{}informe}
\item\relax\sphinxstyleindexentry{POST /crear\sphinxhyphen{}informe/\{vehiculo\_id\}}\sphinxstyleindexpageref{endpoints:\detokenize{post--crear-informe-vehiculo_id}}
\indexspace
\bigletter{/editar\sphinxhyphen{}vehiculo}
\item\relax\sphinxstyleindexentry{PUT /editar\sphinxhyphen{}vehiculo/\{vehiculo\_id\}}\sphinxstyleindexpageref{endpoints:\detokenize{put--editar-vehiculo-vehiculo_id}}
\indexspace
\bigletter{/eliminar\sphinxhyphen{}vehiculo}
\item\relax\sphinxstyleindexentry{DELETE /eliminar\sphinxhyphen{}vehiculo/\{vehiculo\_id\}}\sphinxstyleindexpageref{endpoints:\detokenize{delete--eliminar-vehiculo-vehiculo_id}}
\indexspace
\bigletter{/guardar\sphinxhyphen{}errores}
\item\relax\sphinxstyleindexentry{POST /guardar\sphinxhyphen{}errores/}\sphinxstyleindexpageref{endpoints:\detokenize{post--guardar-errores-}}
\indexspace
\bigletter{/guardar\sphinxhyphen{}vehiculo}
\item\relax\sphinxstyleindexentry{POST /guardar\sphinxhyphen{}vehiculo/}\sphinxstyleindexpageref{endpoints:\detokenize{post--guardar-vehiculo-}}
\indexspace
\bigletter{/informe}
\item\relax\sphinxstyleindexentry{GET /informe/\{token\}}\sphinxstyleindexpageref{endpoints:\detokenize{get--informe-token}}
\indexspace
\bigletter{/login}
\item\relax\sphinxstyleindexentry{POST /login}\sphinxstyleindexpageref{endpoints:\detokenize{post--login}}
\indexspace
\bigletter{/mis\sphinxhyphen{}errores}
\item\relax\sphinxstyleindexentry{GET /mis\sphinxhyphen{}errores/\{vehiculo\_id\}}\sphinxstyleindexpageref{endpoints:\detokenize{get--mis-errores-vehiculo_id}}
\indexspace
\bigletter{/mis\sphinxhyphen{}vehiculos}
\item\relax\sphinxstyleindexentry{GET /mis\sphinxhyphen{}vehiculos/}\sphinxstyleindexpageref{endpoints:\detokenize{get--mis-vehiculos-}}
\item\relax\sphinxstyleindexentry{GET /mis\sphinxhyphen{}vehiculos/\{vehiculo\_id\}}\sphinxstyleindexpageref{endpoints:\detokenize{get--mis-vehiculos-vehiculo_id}}
\indexspace
\bigletter{/register}
\item\relax\sphinxstyleindexentry{POST /register}\sphinxstyleindexpageref{endpoints:\detokenize{post--register}}
\indexspace
\bigletter{/saludo}
\item\relax\sphinxstyleindexentry{GET /saludo}\sphinxstyleindexpageref{endpoints:\detokenize{get--saludo}}
\end{sphinxtheindex}
\renewcommand{\indexname}{Índice de Módulos Python}
\begin{sphinxtheindex}
\let\bigletter\sphinxstyleindexlettergroup
\bigletter{m}
\item\relax\sphinxstyleindexentry{main}\sphinxstyleindexpageref{modelos:\detokenize{module-main}}
\end{sphinxtheindex}

\renewcommand{\indexname}{Índice}
\printindex
\end{document}