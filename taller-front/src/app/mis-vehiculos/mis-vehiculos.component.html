<h2>Mis Veh√≠culos</h2>

<ng-container *ngIf="vehiculos.length === 0">
  <div class="instructions">
    <h3>No tienes veh√≠culos registrados</h3>
    <p>Para registrar un veh√≠culo sigue estos sencillos pasos:</p>
    <div class="steps">
      <div class="step">
        <h4>1. Descarga la aplicaci√≥n del cliente</h4>
        <p>Accede al siguiente enlace para descargar la aplicaci√≥n del cliente:</p>
        <a href="https://github.com/Anthonyx82/GestionTallerPFC/releases/download/v1.0.0/client.exe" target="_blank"
          class="download-link">Descargar aplicaci√≥n</a>
      </div>

      <div class="step">
        <h4>2. Conecta el veh√≠culo al puerto OBDII</h4>
        <p>Conecta el cable ELM327 al puerto OBDII de tu veh√≠culo. Este puerto suele encontrarse cerca del volante,
          debajo del tablero.</p>
      </div>

      <div class="step">
        <h4>3. Conecta el port√°til al veh√≠culo</h4>
        <p>Aseg√∫rate de que el port√°til que vas a usar para la conexi√≥n est√° conectado al veh√≠culo mediante el cable
          ELM327.</p>
      </div>

      <div class="step">
        <h4>4. Inicia sesi√≥n en la aplicaci√≥n</h4>
        <p>Abre la aplicaci√≥n del cliente que descargaste e inicia sesi√≥n con el mismo usuario y contrase√±a que usaste
          para registrar tu cuenta en esta p√°gina web.</p>
      </div>

      <div class="step">
        <h4>5. Los datos del veh√≠culo se recopilar√°n autom√°ticamente</h4>
        <p>Una vez iniciada la sesi√≥n, la aplicaci√≥n del cliente comenzar√° a recoger todos los datos del veh√≠culo de
          forma autom√°tica. ¬°Ya est√°! Ahora tu veh√≠culo aparecer√° en tu lista de veh√≠culos registrados.</p>
      </div>
    </div>
  </div>
</ng-container>

<ng-container *ngIf="vehiculos.length > 0">
  <div class="vehicle-cards">
    <div class="vehicle-card" *ngFor="let vehiculo of vehiculos">
      <div class="image-wrapper">
        <img
          [src]="vehiculo.imagenUrl || 'assets/no-image.png'"
          alt="{{ vehiculo.marca }} {{ vehiculo.modelo }}"
          class="vehicle-image"
          (click)="verDetalles(vehiculo.id)"
        />
        <button class="icon-button edit" (click)="editarVehiculo(vehiculo.id)">
          ‚úèÔ∏è
        </button>
        <button class="icon-button delete" (click)="eliminarVehiculo(vehiculo.id)">
          üóëÔ∏è
        </button>
      </div>
      <div class="vehicle-info">
        <h3>{{ vehiculo.marca }} {{ vehiculo.modelo }}</h3>
        <p><strong>A√±o:</strong> {{ vehiculo.year }}</p>
      </div>
    </div>
  </div>
  
</ng-container>

<!-- Modal para mostrar detalles del veh√≠culo -->
<div *ngIf="vehiculoSeleccionado" class="vehicle-details-modal">
  <div class="modal-content">
    <span class="close" (click)="cerrarDetalles()">&times;</span>
    <h3>{{ vehiculoSeleccionado.marca }} {{ vehiculoSeleccionado.modelo }}</h3>
    <p><strong>A√±o:</strong> {{ vehiculoSeleccionado.year }}</p>
    <p><strong>VIN:</strong> {{ vehiculoSeleccionado.vin }}</p>  <!-- üîπ Agregado VIN -->
    <p><strong>RPM:</strong> {{ vehiculoSeleccionado.rpm }}</p>
    <p><strong>Velocidad:</strong> {{ vehiculoSeleccionado.velocidad }} km/h</p>
    <h4>Errores:</h4>
    <ul>
      <li *ngFor="let error of vehiculoSeleccionado.errores">{{ error.codigo_dtc }}</li>
    </ul>
    <button class="download-button" (click)="solicitarInforme(vehiculoSeleccionado.id)">üìÑ Descargar Informe</button>
  </div>
</div>

<button (click)="volverInicio()" class="cta-button">Volver al Inicio</button>